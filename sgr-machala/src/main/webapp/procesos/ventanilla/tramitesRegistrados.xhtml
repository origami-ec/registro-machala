<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                template="/template/bpmTemplate.xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="title">Trámites Ingresados</ui:define>
    <ui:define name="content">
        <h:form id="mainForm">
            <center><h2>TRÁMITES INGRESADOS</h2></center>
            <p:dataTable id="tablaLiq" paginator="true" lazy="true" rows="15" rowsPerPageTemplate="15, 30, 50" resizableColumns="false" 
                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         value="#{cobroRp.liquidaciones}" var="liq" emptyMessage="No se encontro liquidaciones..." filterEvent="enter"
                         scrollable="true" scrollWidth="99%" >
                <p:column headerText="Opciones del Sistema" width="200">
                    <p:commandButton actionListener="#{cobroRp.viewProcess(liq)}" icon="pi pi-share-alt" 
                                     title="Visualizar Diagrama" style="background-color: darkkhaki;"/>
                    <p:spacer width="5" />
                    <p:commandButton icon="pi pi-folder-open" title="Ver tareas" style="background-color: darkcyan;"
                                     actionListener="#{cobroRp.showInfo(liq)}"/>
                    <p:spacer width="5" />
                    <p:commandButton icon="pi pi-file-pdf" actionListener="#{cobroRp.showProforma(liq)}" 
                                     title="Solicitud de Trámite Nro. #{liq.numTramiteRp}" style="background-color: orangered;"/>
                    <p:spacer width="5" />
                    <p:commandButton icon="pi pi-file" actionListener="#{cobroRp.showFormularioUafe(liq)}" 
                                     title="Formulario UAFE"/>
                    <p:spacer width="5" />
                    <p:commandButton icon="pi pi-pencil" style="background-color: #5f266f;"  actionListener="#{cobroRp.showDlgEditInfoAdiCorreoProf(liq)}" 
                                     title="Editar Inf. Adicional" disabled="# {liq.estadoLiquidacion.id ne 1}" />
                    <!--<p:spacer width="10" />
                    <p:commandButton icon="pi pi-send" actionListener="# {cobroRp.showDlgTipoIngreso(liq)}" 
                                     title="# {liq.numTramiteRp}" disabled="# {liq.estadoLiquidacion.id ne 1}" />
                    <p:spacer width="10" />
                    <p:commandButton icon="pi pi-pencil" actionListener="# {cobroRp.showDlgEditProforma(liq)}" 
                                     title="Editar Proforma" disabled="# {liq.estadoLiquidacion.id ne 1}" />-->
                </p:column>

                <p:column headerText="N° Trámite" filterBy="#{liq.numTramiteRp}" sortBy="#{liq.numTramiteRp}" 
                          width="100" filterStyle="width: 95%">
                    <h:outputText  value="#{liq.numTramiteRp}"/>
                </p:column>
                <p:column headerText="N° Oficio" filterBy="#{liq.oficioMemoReferencia}" width="100" filterStyle="width: 95%;">
                    <h:outputText  value="#{liq.oficioMemoReferencia}"/>
                </p:column>
                <p:column headerText="Repertorio" filterBy="#{liq.repertorio}" width="100" filterStyle="width: 95%">
                    <h:outputText  value="#{liq.repertorio}"/>
                </p:column>
                <p:column headerText="N° Comprobante" filterBy="#{liq.codigoComprobante}" 
                          width="150" filterStyle="width: 95%" rendered="false" >
                    <h:outputText  value="#{liq.codigoComprobante}"/>
                </p:column>
                <p:column headerText="N° Referencia" filterBy="#{liq.numeroAutorizacion}" 
                          width="100" filterStyle="width: 95%" rendered="false" >
                    <h:outputText  value="#{liq.numeroAutorizacion}"/>
                </p:column>
                <p:column headerText="Revisor Título" width="100" rendered="false">
                    <h:outputText value="#{liq.tramite.revisor.usuario}"/>
                </p:column>
                <p:column headerText="Usuario Asignado" width="100">
                    <h:outputText value="#{liq.inscriptor.usuario}"/>
                </p:column>
                <p:column headerText="Reingreso" width="50"> 
                    <h:outputText value="SI" rendered="#{liq.reingreso}"/>
                    <h:outputText value="NO" rendered="#{!liq.reingreso}"/>
                </p:column>
                <p:column headerText="Correo del Trámite" width="200">
                    <h:outputText value="#{liq.correoTramite}"/>
                </p:column>
                <p:column headerText="CI/RUC Solicitante" width="150" filterBy="#{liq.solicitante.ciRuc}" filterStyle="width: 95%;">
                    <h:outputText value="#{liq.solicitante.ciRuc}"/>
                </p:column>
                <p:column headerText="Nombres Solicitante" width="300">
                    <h:outputText value="#{liq.solicitante.nombreCompleto}" style="text-transform: uppercase;"/>
                </p:column>
                <p:column headerText="CI/RUC Factura" width="150" filterBy="#{liq.beneficiario.ciRuc}" filterStyle="width: 95%;">
                    <h:outputText value="#{liq.beneficiario.ciRuc}"/>
                </p:column>
                <p:column headerText="Nombres Factura" width="300" >
                    <h:outputText value="#{liq.beneficiario.nombreCompleto}" style="text-transform: uppercase;"/>
                </p:column>
                <p:column headerText="Fech.Proforma" sortBy="#{liq.fechaCreacion}" width="120" rendered="false">
                    <h:outputText value="#{liq.fechaCreacion}"><f:convertDateTime pattern="dd/MM/yyyy HH:mm"/></h:outputText>
                </p:column>
                <p:column headerText="Fech.Ingreso" sortBy="#{liq.fechaIngreso}" width="120">
                    <h:outputText value="#{liq.fechaIngreso}"><f:convertDateTime pattern="dd/MM/yyyy HH:mm"/></h:outputText>
                </p:column>
                <p:column headerText="Fech.Entrega" width="120">
                    <h:outputText value="#{liq.tramite.fechaEntrega}"><f:convertDateTime pattern="dd/MM/yyyy HH:mm"/></h:outputText>
                </p:column>
                <p:column headerText="Valor $" width="100">
                    <p:outputLabel value="#{liq.totalPagar}"><f:convertNumber minFractionDigits="2"/></p:outputLabel>
                </p:column>
                <p:column headerText="Usuario Proforma" width="100" >
                    <h:outputText value="#{cobroRp.getNameUserByIdAclUser(liq.userCreacion)}"/>
                </p:column>
                <p:column headerText="Usuario Ingreso" width="100">
                    <h:outputText value="#{cobroRp.getNameUserByIdAclUser(liq.userIngreso)}"/>
                </p:column>
                <p:column headerText="Estado Ingreso" width="100">
                    <h:outputText value="#{liq.estadoLiquidacion.code}"/>
                </p:column>
                <p:column headerText="Estado Pago" width="120">
                    <h:outputText value="#{liq.estadoPago.code}"/>
                </p:column>
                <!--<p:column headerText="# Autorización" width="135">
                    <h:outputText value="# {liq.numeroAutorizacion}"/>
                </p:column>
                <p:column headerText="Clave de Acceso" width="135">
                    <h:outputText value="# {liq.claveAcceso}"/>
                </p:column>
                <p:column headerText="Factura Exonerada" width="30">
                    <p:outputLabel value="SI" rendered="# {liq.generaFactura}" />
                    <p:outputLabel value="NO" rendered="# {!liq.generaFactura}" />
                </p:column>
                <p:column headerText="Doc" width="40">
                    <p:commandLink actionListener="# {cobroRp.showDlgCorrDoc(liq)}" title="# {liq.numTramiteRp}">
                        <p:graphicImage value="/resources/icons/abrir.png" height="16"/>   
                    </p:commandLink>
                </p:column>-->
            </p:dataTable>
        </h:form>

        <p:dialog id="dlgIngreso" header="Ingreso de Tramite" widgetVar="dlgIngresoTramite" resizable="false" modal="true" closeOnEscape="true" width="400">
            <h:form id="formIngreso">
                <p:panelGrid styleClass="noBorder" style="text-align: center;font-weight: bolder;width: 100%;" columns="1">
                    <p:outputLabel value="Tipo de Ingreso:"/>
                    <p:selectOneMenu value="#{cobroRp.tipoIngreso}">  
                        <f:selectItem itemLabel="Seleccione" itemValue="0" />
                        <f:selectItem itemLabel="Transaccion" itemValue="1" />
                        <f:selectItem itemLabel="Ctas por Cobrar" itemValue="2" />
                        <f:selectItem itemLabel="Compensacion" itemValue="3" />
                    </p:selectOneMenu>
                    <p:commandButton value="Ingresar" icon="ui-icon-check" styleClass="btnStyle" actionListener="#{cobroRp.procesarLiquidacion()}"/>
                </p:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgExonerado" header="Ingreso de Tramite" widgetVar="dlgIngresoExo" resizable="false" modal="true" closeOnEscape="true"
                  width="70%" height="480">
            <h:form id="formIngresoExo">
                <p:tabView id="tabDetalleIng">
                    <p:tab title="Detalle Ingreso">
                        <p:panelGrid styleClass="noBorder" columns="6">
                            No Tramite:
                            <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" style="font-weight: bold;font-size: 15px;"/>
                            CI/RUC:
                            <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.ciRuc}" style="font-weight: bold;font-size: 15px;"/>
                            Cliente:
                            <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.nombreCompleto}" style="font-weight: bold;font-size: 15px;"/>
                        </p:panelGrid>
                        <p:panelGrid styleClass="noBorder" columns="6">
                            Telefono:
                            <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.telefono1}" style="font-weight: bold;font-size: 15px;"/>
                            Correo:
                            <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.correo1}" style="font-weight: bold;font-size: 15px;"/>
                            Direccion:
                            <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.direccion}" style="font-weight: bold;font-size: 15px;"/>
                        </p:panelGrid>
                        <p:panelGrid styleClass="noBorder" columns="2">
                            <p:outputLabel value="Solicitud:" rendered="#{cobroRp.liquidacion.ingresado}"/>
                            <p:outputLabel value="ORDEN JUDICIAL (2 DIAS PARA ENTREGA)" style="font-weight: bold;font-size: 15px;" rendered="#{cobroRp.liquidacion.ingresado}"/>
                        </p:panelGrid>
                        <p:dataTable value="#{cobroRp.liquidacion.regpLiquidacionDetallesCollection}" var="det" style="text-align: center;"
                                     scrollable="true" scrollHeight="180">
                            <p:column headerText="Contrato">#{det.acto.nombre}</p:column>
                            <p:column headerText="Avaluo" width="100">#{det.avaluo}</p:column>
                            <p:column headerText="Cuantia" width="100">#{det.cuantia}</p:column>
                            <p:column headerText="Valor Uni." width="100">#{det.valorUnitario}</p:column>
                            <p:column headerText="Exo." width="100">#{det.exoneracion.porcentaje}</p:column>
                            <p:column headerText="Valor Total" width="100">#{det.valorTotal}</p:column>
                        </p:dataTable>
                        <p:panelGrid styleClass="noBorder" columns="6" style="float: right;">
                            Desc.Limit.Cobro:
                            <p:outputLabel value="$ #{cobroRp.liquidacion.descLimitCobro}" style="font-weight: bold;font-size: 15px;color: #0033FF;"/>
                            Desc.Ley:
                            <p:outputLabel value="$ #{cobroRp.liquidacion.descuentoValor}" style="font-weight: bold;font-size: 15px;color: #0033FF;"/>
                            Total a Cancelar:
                            <p:outputLabel value="$ #{cobroRp.liquidacion.totalPagar}" style="font-weight: bold;font-size: 15px;color: #0033FF;"/>
                        </p:panelGrid><br/><br/><br/>
                        <div align="center">
                            <p:commandButton value="Confirmar" styleClass="btnStyle" icon="ui-icon-check" actionListener="#{cobroRp.ingresarTramiteSinValor()}"/>
                        </div>
                    </p:tab>
                    <p:tab title="Informacion Proforma">
                        <p:panel header="Referencia">
                            <p:panelGrid columns="2" styleClass="noBorder" style="font-weight: bolder;">
                                No de Trámite de Referencia:
                                <p:inputNumber value="#{cobroRp.referencia}" decimalPlaces="0"/>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel header="Certificador o Inscriptor">
                            <p:panelGrid columns="2" styleClass="noBorder" style="font-weight: bolder;">
                                Seleccionar:
                                <p:selectOneMenu value="#{cobroRp.asignado}" converter="entityConverter" filter="true" autoWidth="false" 
                                                 style="display: block; margin-top: 3px; min-width: 0px !important; width: 150px !important;">  
                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
                                    <f:selectItems value="#{cobroRp.disponibles}" var="us" itemLabel="#{us.usuario}" itemValue="#{us}"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel header="Tramitador" rendered="false">
                            <p:panelGrid id="panelSolicitante" columns="3" styleClass="noBorder" style="font-weight: bolder;" >
                                Nombre de Solicitante:
                                <p:inputText value="#{cobroRp.solicitanteInterviniente.nombreCompleto}" size="30" readonly="true"/>
                                <p:commandButton value="Buscar" icon="ui-icon-search" styleClass="btnStyle" actionListener="#{cobroRp.showDlg('/resources/dialog/dlglazyente')}">
                                    <p:ajax event="dialogReturn" listener="#{cobroRp.selectObject}" update="panelSolicitante"/>
                                </p:commandButton>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel id="pnlEstudio" header="Estudio Jurídico" rendered="false">
                            <p:panelGrid columns="4" styleClass="noBorder" style="font-weight: bolder;" >
                                Nombre del Representante del Estudio Jurídico:
                                <p:selectOneMenu value="#{cobroRp.estudioJuridico}" converter="entityConverter">  
                                    <f:selectItem itemLabel="Seleccione..." itemValue="#{null}" />
                                    <f:selectItems value="#{cobroRp.estudiosJuridicos}" var="it" itemLabel="#{it.valor}" itemValue="#{it}"/>
                                </p:selectOneMenu>
                                <p:commandButton value="Nuevo" icon="ui-icon-plus" styleClass="btnStyle" actionListener="#{cobroRp.showDlgEstudioJuridico()}"/>
                                <p:commandButton value="Editar" icon="ui-icon-pencil" styleClass="btnStyle" actionListener="#{cobroRp.showDlgEditEstudioJuridico()}"/>
                            </p:panelGrid>
                        </p:panel>
                        <p:panel header="Informacion Adicional">
                            <p:panelGrid styleClass="noBorder" columns="1">
                                <p:inputTextarea id="infoAdicional" value="#{cobroRp.infoAdicional}" rows="5" cols="200" style="width: 100%"/>
                            </p:panelGrid>
                        </p:panel>                  
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:dialog>

        <p:dialog showHeader="false" widgetVar="dlgProcesar" resizable="false"
                  closeOnEscape="true" modal="true" width="70%" position="center" height="600">
            <h:form id="formProcesar">
                <center>
                    <h2>Procesar Pago</h2>
                </center>
                <p:tabView id="tabDetalle">
                    <p:tab title="Detalle Proforma">
                        <br></br>
                        <h:panelGrid styleClass="noBorder" columns="3" style="width: 100%;">
                            <h:panelGroup>
                                No Tramite: <p:spacer width="10" /> <br></br>
                                <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" style="font-weight: bold;font-size: 15px;"/>    
                            </h:panelGroup>
                            <h:panelGroup>
                                <div class="ui-g ui-fluid">
                                    <div class="ui-g-12">
                                        CI/RUC:<p:spacer width="10" />
                                        <div class="ui-inputgroup">
                                            <p:inputText id="actonomb" value="#{cobroRp.liquidacion.beneficiario.ciRuc}"
                                                         onkeypress="focusNextOnEnter(event, 'email')"/>
                                            <p:commandButton icon="pi pi-search" process="@this" title="Cambiar Beneficiario"
                                                             actionListener="#{cobroRp.showDlg('/resources/dialog/dlglazyente')}" >
                                                <p:ajax event="dialogReturn" listener="#{cobroRp.selectInterv}" update="actonomb,nombre_cliente,data_extra"/>
                                            </p:commandButton>    
                                        </div>
                                    </div>
                                </div>   
                            </h:panelGroup>
                            <h:panelGroup>
                                Cliente:<p:spacer width="10" /> <br></br>
                                <p:outputLabel id="nombre_cliente" value="#{cobroRp.liquidacion.beneficiario.nombreCompleto}" style="font-weight: bold;font-size: 15px;"/>
                            </h:panelGroup>
                            <h:panelGroup>
                                Telefono:<p:spacer width="10" /><br></br>
                                <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.telefono1}" style="font-weight: bold;font-size: 15px;"/>
                            </h:panelGroup> 

                            <h:panelGroup>
                                <div class="ui-g ui-fluid">
                                    <div class="ui-g-12">
                                        Correo:<br></br>
                                        <div class="ui-inputgroup">
                                            <p:inputText id="email" value="#{cobroRp.liquidacion.beneficiario.correo1}" />
                                            <p:commandButton icon="pi pi-pencil" process="email" title="Actualizar Cambios"
                                                             actionListener="#{cobroRp.updateCorreoBeneceificiario()}" />
                                        </div>
                                    </div>
                                </div>  
                            </h:panelGroup> 
                            <h:panelGroup>
                                Direccion: <br></br>
                                <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.direccion}" style="font-weight: bold;font-size: 15px;"/>
                            </h:panelGroup>
                        </h:panelGrid>
                        <h:panelGrid id="data_extra" styleClass="noBorder" columns="3" style="width: 100%;">

                        </h:panelGrid>
                        <h:panelGrid styleClass="noBorder" columns="2">
                            <p:outputLabel value="Solicitud:" rendered="#{cobroRp.liquidacion.ingresado}"/>
                            <p:outputLabel value="ORDEN JUDICIAL (2 DIAS PARA ENTREGA)" style="font-weight: bold;font-size: 15px;" rendered="#{cobroRp.liquidacion.ingresado}"/>
                        </h:panelGrid>
                        <br></br>
                        <p:dataTable value="#{cobroRp.liquidacion.regpLiquidacionDetallesCollection}" var="det" style="text-align: center;"
                                     scrollable="true" scrollHeight="200">
                            <p:column headerText="Contrato">#{det.acto.nombre}</p:column>
                            <p:column headerText="Base Imponible" width="100">#{det.baseImponible}</p:column>
                            <p:column headerText="Valor Uni." width="100">#{det.valorUnitario}</p:column>
                            <p:column headerText="Cantidad" width="100">#{det.cantidad}</p:column>
                            <p:column headerText="Adicional" width="100">#{det.recargo}</p:column>
                            <p:column headerText="Exo." width="100">#{det.descuento}</p:column>
                            <p:column headerText="Valor Total" width="100">#{det.valorTotal}</p:column>
                        </p:dataTable>
                        <br></br>
                        <h:panelGrid styleClass="noBorder" columns="6">
                            Adicional:
                            <p:outputLabel value="$ #{cobroRp.liquidacion.adicional}" style="font-weight: bold;font-size: 15px;color: #0033FF;"/>
                            Desc.Ley:
                            <p:outputLabel value="$ #{cobroRp.liquidacion.descuentoValor}" style="font-weight: bold;font-size: 15px;color: #0033FF;"/>
                            Total a Cancelar:
                            <p:outputLabel value="$ #{cobroRp.liquidacion.totalPagar}" style="font-weight: bold;font-size: 15px;color: #0033FF;"/>
                        </h:panelGrid>
                        <center>
                            <p:panel id="botonesExonerados" rendered="#{!cobroRp.liquidacion.generaFactura}">
                                <p:commandButton value="Procesar" actionListener="#{cobroRp.cancelarLiquidacion()}" update="formProcesar,mainForm" icon="ui-icon-print" style="font-size: 14px;">
                                </p:commandButton><p:spacer width="25"/>                        
                            </p:panel>
                            <p:commandButton value="Cancelar" oncomplete="PF('dlgProcesar').hide();" 
                                             icon="pi pi-ban" style="font-size: 14px;"/>
                        </center>
                    </p:tab>
                    <p:tab title="Detalle Pago" rendered="#{cobroRp.liquidacion.generaFactura}">
                        <p:fieldset legend="Datos Proforma" style="float: left; width: 49%">
                            <h:panelGrid styleClass="noBorder" style="width: 100%;" columns="3">
                                <h:panelGroup>
                                    <p:outputLabel value="# Tramite:" /> <br></br>
                                    <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" style="font-weight: bolder;font-size: 14px;"/>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel value="Fecha Proforma:" /> <br></br>
                                    <p:outputLabel value="#{cobroRp.liquidacion.fechaCreacion}" style="font-weight: bolder;font-size: 14px;">
                                        <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
                                    </p:outputLabel>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel value="Valor a Cobrar:" /> <br></br>
                                    <p:outputLabel value="#{cobroRp.liquidacion.totalPagar}" style="font-weight: bolder;font-size: 14px;"/>
                                </h:panelGroup>
                            </h:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Datos del Cliente" style="float: right; width: 49%;">
                            <h:panelGrid style="width: 100%;" columns="2">
                                <h:panelGroup>
                                    <p:outputLabel value="Identificación:" /> <br></br>
                                    <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.ciRuc}" style="font-weight: bold; font-size: 14px;"/>
                                </h:panelGroup>
                                <h:panelGroup>
                                    <p:outputLabel value="Nombres" /> <br></br>
                                    <p:outputLabel value="#{cobroRp.liquidacion.beneficiario.nombreCompleto}" style="font-weight: bold; font-size: 14px;"/>
                                </h:panelGroup>
                            </h:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Detalle de Cobro">
                            <p:panelGrid id="detCobro" style="width: 100%;" styleClass="noBorder">
                                <p:row>
                                    <p:column style="width: 100px;"><p:outputLabel value="Efectivo" style="font-weight: bolder;"/></p:column>
                                    <p:column style="width: 100px;"><p:inputText value="#{cobroRp.modelPago.valorTotalEfectivo}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px;" /></p:column>
                                    <p:column rowspan="6">
                                        <p:tabView>
                                            <p:tab title="1. EFECTIVO">
                                                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="font-weight: bolder;">
                                                    <p:outputLabel value="Valor Recibido"/>
                                                    <p:inputText value="#{cobroRp.modelPago.valorRecibido}" style="font-weight: bolder; font-size: 12px;" >
                                                        <p:ajax event="blur" listener="#{cobroRp.modelPago.calcularEfectivo()}" update="formProcesar:tabDetalle:detCobro" process="@all"/>
                                                    </p:inputText>
                                                    <p:outputLabel value="Valor a Cobrar"/>
                                                    <p:inputText value="#{cobroRp.modelPago.valorCobrar}" readonly="true" style="font-weight: bolder; font-size: 12px;" />
                                                    <p:outputLabel value="Cambio"/><p:inputText value="#{cobroRp.modelPago.valorCambio}" readonly="true" style="font-weight: bolder; font-size: 12px;"/>
                                                </p:panelGrid>
                                            </p:tab>
                                            <p:tab title="2. NOTA DE CREDITO" >
                                                <p:panelGrid styleClass="ui-panelgrid-blank" style="font-weight: bolder;">
                                                    <p:row>
                                                        <p:column>
                                                            <p:outputLabel value="# Nota Credito"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoNotaCredio.numCredito}"  />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Fecha"/><br/>
                                                            <p:calendar value="#{cobroRp.modelPago.pagoNotaCredio.fecha}" pattern="dd/MM/yyyy"/>
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Valor"/><br/>
                                                            <p:inputText type="number" value="#{cobroRp.modelPago.pagoNotaCredio.valor}" />
                                                        </p:column>
                                                        <p:column><p:commandButton icon="pi pi-caret-down" actionListener="#{cobroRp.modelPago.agregarPago(3)}" 
                                                                                   update="formProcesar:tabDetalle:detCobro"/></p:column>
                                                    </p:row>
                                                </p:panelGrid>
                                                <p:dataTable id="dtNC" var="nc" value="#{cobroRp.modelPago.listPagoNotaCredio}" style="text-align: center;">
                                                    <p:column headerText="# Credito"><h:outputText value="#{nc.numCredito}" /></p:column>
                                                    <p:column headerText="Fecha"><h:outputText value="#{nc.fecha}" ><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                                    <p:column headerText="Valor">
                                                        <h:outputText value="#{nc.valor}"><f:convertNumber minFractionDigits="2"/></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Del" width="30">
                                                        <p:commandLink actionListener="#{cobroRp.modelPago.eliminarPagoNC(nc)}" update="formProcesar:tabDetalle:detCobro">
                                                            <p:graphicImage value="/resources/icons/delete.png" height="16"/>   
                                                        </p:commandLink>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:tab>
                                            <p:tab title="3. CHEQUE">
                                                <p:panelGrid styleClass="ui-panelgrid-blank" style="font-weight: bolder;">
                                                    <p:row>
                                                        <p:column>
                                                            <p:outputLabel value="Banco"/><br/>
                                                            <p:selectOneMenu value="#{cobroRp.modelPago.pagoCheque.banco}" converter="entityConverter" filter="true" 
                                                                             style="display: block; margin-top: 3px; min-width: 0px !important; width: 120px !important;"
                                                                             filterMatchMode="contains" >
                                                                <f:attribute name="name" value="RenEntidadBancaria"/>
                                                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                                <f:selectItems value="#{cobroRp.bancos}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                            </p:selectOneMenu>
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="# Cheque"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoCheque.numCheque}" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="# Cuenta"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoCheque.numCuenta}" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Valor"/><br/>
                                                            <p:inputText type="number" value="#{cobroRp.modelPago.pagoCheque.valor}" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value=""/><br/>
                                                            <p:commandButton icon="pi pi-caret-down" actionListener="#{cobroRp.modelPago.agregarPago(4)}" 
                                                                             update="formProcesar:tabDetalle:detCobro"/>
                                                        </p:column>
                                                    </p:row>
                                                </p:panelGrid>
                                                <p:dataTable id="dtCh" var="ch" value="#{cobroRp.modelPago.listPagoCheque}" style="margin-bottom:0; width: 700px;">
                                                    <p:column headerText="BANCO"><h:outputText value="#{ch.banco.descripcion}" /></p:column>
                                                    <p:column headerText="# Cheque"><h:outputText value="#{ch.numCheque}" /></p:column>
                                                    <p:column headerText="# Cuenta"><h:outputText value="#{ch.numCuenta}" /></p:column>
                                                    <p:column headerText="Valor">
                                                        <h:outputText value="#{ch.valor}" ><f:convertNumber minFractionDigits="2"/></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Del" width="30">
                                                        <p:commandLink actionListener="#{cobroRp.modelPago.eliminarPagoCh(ch)}" update="formProcesar:tabDetalle:detCobro">
                                                            <p:graphicImage value="/resources/icons/delete.png" height="16"/>   
                                                        </p:commandLink>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:tab>
                                            <p:tab title="4. TARJETA">
                                                <p:panelGrid styleClass="ui-panelgrid-blank" style="font-weight: bolder;">
                                                    <p:row>
                                                        <p:column>
                                                            <p:outputLabel value="Tipo"/><br/>
                                                            <p:selectOneMenu value="#{cobroRp.modelPago.pagoTarjetaCredito.tipoTarjeta}" 
                                                                             style="display: block; margin-top: 3px; min-width: 0px !important; width: 100px !important;">
                                                                <f:selectItem itemLabel="Debito" itemValue="#{1}"/>
                                                                <f:selectItem itemLabel="Corriente" itemValue="#{2}"/>
                                                                <f:selectItem itemLabel="Diferido" itemValue="#{3}"/>
                                                            </p:selectOneMenu>
                                                        </p:column>
                                                        <!--<p:column>
                                                            <p:outputLabel value="Banco"/><br/>
                                                            <p:selectOneMenu value="# {cobroRp.modelPago.pagoTarjetaCredito.banco}" effect="fade" converter="entityConverter"
                                                                             style="display: block; margin-top: 3px; min-width: 0px !important; width: 120px !important;">
                                                                <f:attribute name="name" value="RenEntidadBancaria"/>
                                                                <f:selectItem itemLabel="Seleccionar..." itemValue="# {null}"/>
                                                                <f:selectItems value="# {cobroRp.tarjetas}" var="banco" itemLabel="# {banco.descripcion}" itemValue="# {banco}"/>
                                                            </p:selectOneMenu>
                                                        </p:column>-->
                                                        <p:column>
                                                            <p:outputLabel value="Titular"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoTarjetaCredito.nombreTitular}" size="14" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Lote"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoTarjetaCredito.autorizacion}" size="14" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Referencia"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoTarjetaCredito.baucher}" size="14" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Valor"/><br/>
                                                            <p:inputText type="number" value="#{cobroRp.modelPago.pagoTarjetaCredito.valor}" style="width: 90px;" />
                                                        </p:column>
                                                        <!--<p:column>
                                                            <p:outputLabel value="# Tarjeta"/><br/>
                                                            <p:inputText value="# {cobroRp.modelPago.pagoTarjetaCredito.numTarjeta}" size="14"/>
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Fecha Caduca"/><br/>
                                                            <p:calendar value="# {cobroRp.modelPago.pagoTarjetaCredito.fechaCaducidad}" pattern="dd/MM/yyyy" size="10"/>
                                                        </p:column>-->
                                                        <p:column><br/><p:commandButton icon="pi pi-caret-down" actionListener="#{cobroRp.modelPago.agregarPago(2)}" 
                                                                                        update="formProcesar:tabDetalle:detCobro"/></p:column>
                                                    </p:row>
                                                </p:panelGrid>
                                                <p:dataTable id="dtTC" var="tc" value="#{cobroRp.modelPago.listPagoTarjetaCredito}" style="margin-bottom:0; width: 700px;">
                                                    <!--<p:column headerText="BANCO"><h:outputText value="# {tc.banco.descripcion}" /></p:column>-->
                                                    <!--<p:column headerText="# Tarjeta"><h:outputText value="# {tc.numTarjeta}" /></p:column>-->
                                                    <!--<p:column headerText="Fecha Caducidad"><h:outputText value="# {tc.fechaCaducidad}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>-->
                                                    <p:column headerText="Tipo">
                                                        <h:outputText value="Debito" rendered="#{tc.tipoTarjeta eq 1}"/> 
                                                        <h:outputText value="Corriente" rendered="#{tc.tipoTarjeta eq 2}"/> 
                                                        <h:outputText value="Diferido" rendered="#{tc.tipoTarjeta eq 3}"/> 
                                                    </p:column>
                                                    <p:column headerText="Titular"><h:outputText value="#{tc.nombreTitular}" /></p:column>
                                                    <p:column headerText="Lote"><h:outputText value="#{tc.autorizacion}" /></p:column>
                                                    <p:column headerText="Referencia"><h:outputText value="#{tc.baucher}" /></p:column>
                                                    <p:column headerText="Valor">
                                                        <h:outputText value="#{tc.valor}" ><f:convertNumber minFractionDigits="2"/></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Del" width="30">
                                                        <p:commandLink actionListener="#{cobroRp.modelPago.eliminarPagoTC(tc)}" update="formProcesar:tabDetalle:detCobro">
                                                            <p:graphicImage value="/resources/icons/delete.png" height="16"/>   
                                                        </p:commandLink>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:tab>
                                            <p:tab title="5. TRANSFERENCIA">
                                                <p:panelGrid styleClass="ui-panelgrid-blank" style="font-weight: bolder;">
                                                    <p:row>
                                                        <p:column>
                                                            <p:outputLabel value="Banco"/><br/>
                                                            <p:selectOneMenu value="#{cobroRp.modelPago.pagoTransferencia.banco}" converter="entityConverter" filter="true"
                                                                             style="display: block; margin-top: 3px; min-width: 0px !important; width: 100px !important;" 
                                                                             filterMatchMode="contains" >
                                                                <f:attribute name="name" value="RenEntidadBancaria"/>
                                                                <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}"/>
                                                                <f:selectItems value="#{cobroRp.bancos}" var="banco" itemLabel="#{banco.descripcion}" itemValue="#{banco}"/>
                                                            </p:selectOneMenu>
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="# Transferencia"/><br/>
                                                            <p:inputText value="#{cobroRp.modelPago.pagoTransferencia.numTransferencia}" 
                                                                         maxlength="45"  />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Fecha"/><br/>
                                                            <p:calendar value="#{cobroRp.modelPago.pagoTransferencia.fecha}" pattern="dd/MM/yyyy" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value="Valor"/><br/>
                                                            <p:inputText type="number" value="#{cobroRp.modelPago.pagoTransferencia.valor}" />
                                                        </p:column>
                                                        <p:column>
                                                            <p:outputLabel value=""/><br/>
                                                            <p:commandButton icon="pi pi-caret-down" actionListener="#{cobroRp.modelPago.agregarPago(5)}" 
                                                                             update="formProcesar:tabDetalle:detCobro"/>
                                                        </p:column>
                                                    </p:row>
                                                </p:panelGrid>
                                                <p:dataTable id="dtT" var="t" value="#{cobroRp.modelPago.listPagoTransferencia}" style="margin-bottom:0; width: 650px;">
                                                    <p:column headerText="Banco"><h:outputText value="#{t.banco.descripcion}" /></p:column>
                                                    <p:column headerText="# Transferencia"><h:outputText value="#{t.numTransferencia}" /></p:column>
                                                    <p:column headerText="Fecha"><h:outputText value="#{t.fecha}"><f:convertDateTime pattern="dd/MM/YYYY"/></h:outputText></p:column>
                                                    <p:column headerText="Valor">
                                                        <h:outputText value="#{t.valor}" ><f:convertNumber minFractionDigits="2"/></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Del" width="30">
                                                        <p:commandLink actionListener="#{cobroRp.modelPago.eliminarPagoTransferencia(t)}" update="formProcesar:tabDetalle:detCobro">
                                                            <p:graphicImage value="/resources/icons/delete.png" height="16"/>   
                                                        </p:commandLink>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:tab>
                                            <p:tab title="6. OTROS VALORES" rendered="false">
                                                <h:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="font-weight: bolder;">
                                                    <p:outputLabel value="Valor: "/>
                                                    <p:inputText value="#{cobroRp.modelPago.valorTotalOtros}" 
                                                                 style="font-weight: bolder; font-size: 12px;" >
                                                        <p:ajax event="blur" listener="#{cobroRp.modelPago.calcularOtrosValores()}" 
                                                                update="formProcesar:tabDetalle:detCobro" process="@all"/>
                                                    </p:inputText>
                                                </h:panelGrid>
                                            </p:tab>
                                        </p:tabView>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column><p:outputLabel value="Notas Credito" style="font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{cobroRp.modelPago.valorTotalNotasCredito}" readonly="true" 
                                                           size="8" style="font-weight: bolder; font-size: 14px;" /></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><p:outputLabel value="Cheque" style="font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{cobroRp.modelPago.valorTotalCheques}" readonly="true" size="8" 
                                                           style="font-weight: bolder; font-size: 14px;" /></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><p:outputLabel value="Tarjeta" style="font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{cobroRp.modelPago.valorTotalTarjetas}" readonly="true" size="8" 
                                                           style="font-weight: bolder; font-size: 14px;" /></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><p:outputLabel value="Transferencia" style="font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{cobroRp.modelPago.valorTotalTransferencias}" readonly="true" 
                                                           size="8" style="font-weight: bolder; font-size: 14px;" /></p:column>
                                </p:row>
                                <p:row rendered="false">
                                    <p:column><p:outputLabel value="Otros" style="font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{cobroRp.modelPago.valorTotalOtros}" readonly="true" 
                                                           size="8" style="font-weight: bolder; font-size: 14px;" /></p:column>
                                </p:row>
                                <p:row>
                                    <p:column><p:outputLabel value="TOTAL" style="font-weight: bolder;"/></p:column>
                                    <p:column><p:inputText value="#{cobroRp.modelPago.valorTotal}" readonly="true" size="8" style="font-weight: bolder; font-size: 14px; color: red;"/></p:column>
                                </p:row>
                            </p:panelGrid>           
                        </p:fieldset>
                        <p:panel id="botones">
                            <center>
                                <p:commandButton value="Procesar"  actionListener="#{cobroRp.cancelarLiquidacion()}" 
                                                 update="formProcesar,mainForm" icon="pi pi-print" style="font-size: 14px;">
                                </p:commandButton><p:spacer width="25"/>                        
                                <p:commandButton value="Cancelar"  oncomplete="PF('dlgProcesar').hide();" icon="pi pi-ban" 
                                                 style="font-size: 14px;"/>
                            </center>
                        </p:panel>
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgDocumento" widgetVar="dlgDocs" header="Reemplazar Documento Habilitante" modal="true" width="500" height="300" 
                  resizable="false" position="center" closable="true" closeOnEscape="true">
            <h:form id="formDocs">
                <p:panelGrid styleClass="noBorder" style="margin: 0 auto;width: 100%;" columns="1">
                    <p:outputLabel value="ESPERE A QUE LA VENTANA SE CIERRE!!!" style="font-weight: bolder;color: #0033FF;font-size: 14px;"/>
                    <p:outputLabel value="Tramite: #{cobroRp.historico.numTramite}" style="font-weight: bolder;font-size: 14px;"/>
                    <p:outputLabel value="Fecha Ingreso: #{cobroRp.historico.fechaIngreso}" style="font-weight: bolder;font-size: 14px;"/>
                    <p:fileUpload listener="#{cobroRp.handleUpload}" 
                                  mode="advanced" 
                                  fileLimit="1" 
                                  dragDropSupport="false" 
                                  sizeLimit="10000000000" 
                                  label="Seleccionar" 
                                  uploadLabel="Subir" 
                                  style="width: auto;" 
                                  cancelLabel="Cancelar" 
                                  allowTypes="/(\.|\/)(pdf)$/" />
                </p:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog id="dglEstudioJuridico" widgetVar="estudioJuridico" header="Estudio Juridico" resizable="false" modal="true">
            <h:form id="formEstudioJuridico">
                <p:panelGrid styleClass="noBorder">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Nombre:" style="font-weight: bolder;font-size: 12px"/>
                        </p:column>
                        <p:column>
                            <p:inputText value="#{cobroRp.estudioJuridicoNuevo.valor}" size="40" maxlength="50"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column colspan="2">
                            <center><p:commandButton value="Guardar" icon="ui-icon-check" styleClass="btnStyle" actionListener="#{cobroRp.guardarEstudioJuridico()}"/></center>
                        </p:column>
                    </p:row>
                </p:panelGrid>
            </h:form>
        </p:dialog> 

        <p:dialog widgetVar="dlgUsuarioAsignado" header="ASIGNACION DE TRAMITE" modal="true" 
                  resizable="false" position="center" closable="false" closeOnEscape="false">
            <h:form id="formUserAsignado">
                <h:panelGrid columns="1" style="text-align: center;font-weight: bolder;">
                    <p:outputLabel value="NRO DE TRÁMITE:" style="font-size: 16px;"/>
                    <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" 
                                   style="font-size: 30px;color: #0033FF"/>
                    <p:outputLabel value="FECHA DE INGRESO:" style="font-size: 16px;"/>
                    <p:outputLabel value="#{cobroRp.liquidacion.fechaIngreso}" 
                                   style="font-size: 30px;color: #0033FF" >
                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                    </p:outputLabel>
                    <p:spacer width="1" height="1"/>
                    <p:commandButton value="ACEPTAR" icon="pi pi-thumbs-up" 
                                     actionListener="#{cobroRp.redirectPage('/procesos/ventanilla/tramitesRegistrados.xhtml')}">
                    </p:commandButton>
                </h:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgDiagrama" header="Diagrama de Proceso" modal="true" position="top" 
                  closeOnEscape="true" height="650" width="1000">
            <h:form id="frmDiagrama">
                <p:graphicImage value="#{cobroRp.stream}" stream="false" rendered="#{cobroRp.stream ne null}" />
            </h:form>
        </p:dialog>

        <p:dialog id="dlgVerInfo" header="Informacion de Tramite" widgetVar="dlgVerInfoRp" resizable="false" 
                  closeOnEscape="true" modal="true" width="700" height="500">
            <h:form id="formInformLiq">
                <h:panelGrid columns="2">
                    <p:outputLabel value="No de Tramite:" style="font-weight: bold; font-size: 18px;color: #d2322d"/>
                    <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" style="font-weight: bold; font-size: 18px;"/>
                </h:panelGrid>
                <h:panelGrid columns="1" rendered="#{cobroRp.liquidacion.estadoPago.id eq 7}">
                    <p:outputLabel value="TRÁMITE INGRESADO EN LÍNEA" style="font-weight: bold; font-size: 18px; color: #0033FF;"/>
                </h:panelGrid>
                <p:tabView id="tabTramite">
                    <p:tab title="Tareas" rendered="#{!userSession.roles.contains(51)}">
                        <p:dataTable value="#{cobroRp.tareas}" emptyMessage="El tramite no ha sido ingresado." lazy="false" 
                                     var="tarea" scrollable="true" scrollHeight="350" style="text-align: center;width: 99%">
                            <p:column headerText="Nombre Tarea">
                                <p:outputLabel value="#{tarea.name}"/>
                            </p:column>
                            <p:column headerText="Usuario" width="100">
                                <p:outputLabel value="#{tarea.assignee}" rendered="#{tarea.assignee ne null}"/>
                                <p:outputLabel value="#{cobroRp.usuariosCandidatos(tarea.id)}" rendered="#{tarea.assignee eq null}"/>
                            </p:column>
                            <p:column headerText="Fech.Inicio" width="120">
                                <p:outputLabel value="#{tarea.createTime}">
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="Fech.Fin" width="120">
                                <p:outputLabel value="#{tarea.endTime}">
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"    />
                                </p:outputLabel>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Observaciones">
                        <p:dataTable value="#{cobroRp.ht.observacionesCollection}" emptyMessage="Sin elementos..." lazy="false" 
                                     var="obs" scrollable="true" scrollHeight="350" style="text-align: center;width: 99%">
                            <p:column headerText="Tarea" width="150">
                                <p:outputLabel value="#{obs.tarea}"/>
                            </p:column>
                            <p:column headerText="Observacion">
                                <p:outputLabel value="#{obs.observacion}"/>
                            </p:column>
                            <p:column headerText="Fecha" width="60">
                                <p:outputLabel value="#{obs.fecCre}" ><f:convertDateTime pattern="dd/MM/yyyy HH:mm"/></p:outputLabel>
                            </p:column>
                            <p:column headerText="Usuario" width="60">
                                <p:outputLabel value="#{obs.userCre}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Intervinientes del Trámite">
                        <div class="card">
                            <p:dataTable var="det"
                                         value="#{cobroRp.liquidacion.regpLiquidacionDetallesCollection}"
                                         style="width:100%;">

                                <p:columnGroup type="header">
                                    <p:row>
                                        <p:column colspan="3" headerText="Acto / Intervinientes"/>
                                    </p:row>
                                </p:columnGroup>
                                <p:column>
                                    <h:outputText value="#{det.acto.nombre}"
                                                  style="font-weight:bold;" />
                                </p:column>
                                <p:column colspan="2">
                                    <p:dataTable var="inter"
                                                 value="#{det.regpIntervinientesCollection}"
                                                 style="width:100%; border: none;">

                                        <p:column headerText="Interviniente">
                                            <h:outputText 
                                                value="#{empty inter.ente.apellidos and empty inter.ente.nombres 
                                                         ? ( empty inter.ente.razonSocial 
                                                         ? inter.ente.nombreComercial 
                                                         : inter.ente.razonSocial) 
                                                         : inter.ente.apellidos.concat(' ').concat(inter.ente.nombres)}" />
                                        </p:column>

                                        <p:column headerText="Papel">
                                            <h:outputText value="#{inter.papel.papel}" />
                                        </p:column>

                                    </p:dataTable>
                                </p:column>

                            </p:dataTable>
                        </div>
                    </p:tab>
                    <p:tab title="Documentos">
                        <p:dataTable value="#{cobroRp.lazyArchivos}" style="text-align: center;" scrollable="true" lazy="true"
                                     emptyMessage="Sin documentos digitalizados..." scrollHeight="300" var="doc1" paginator="true" reflow="true"
                                     rows="5" paginatorAlwaysVisible="false" >
                            <p:column headerText="Nombre" >
                                <p:outputLabel id="nombreDoc" value="#{doc1.detalleDocumento}" />
                                <p:tooltip for="nombreDoc" value="#{doc1.detalleDocumento}" position="top" />
                            </p:column>
                            <p:column headerText="Usuario" width="80" >
                                <p:outputLabel value="#{doc1.usuario.usuario}" />
                            </p:column>
                            <p:column headerText="Fecha" width="80" >
                                <p:outputLabel value="#{doc1.fecha}" />
                            </p:column>
                            <p:column headerText="Descripción" width="80" >
                                <p:outputLabel value="Páginas: " style="font-weight: bolder"/>
                                <p:outputLabel value="#{doc1.numeroPaginas}" /> <br/>
                                <p:outputLabel value="Formato: " style="font-weight: bolder"/>
                                <p:outputLabel value="#{doc1.formato}" /> <br/>
                                <p:outputLabel value="Peso: " style="font-weight: bolder"/>
                                <p:outputLabel value="#{doc1.peso}" />
                            </p:column>
                            <p:column headerText="***" width="50">
                                <p:panelGrid columns="2" styleClass="ui-noborder">
                                    <p:commandLink actionListener="#{tramitesIngresados.visualizarDocumento(doc1)}" process="@this" 
                                                   style="margin-right: 10px" title="Visualizar">
                                        <i class="pi pi-file-pdf" style="font-size: 1.5em; margin-right: 5px;color: darkgreen;"></i>
                                    </p:commandLink> 
                                    <p:commandLink actionListener="#{tramitesIngresados.descargarDocumento(doc1)}" process="@this" 
                                                   style="margin-right: 10px" title="Descargar">
                                        <i class="pi pi-download" style="font-size: 1.5em; margin-right: 5px;color: darkcyan;"></i>
                                    </p:commandLink> 
                                </p:panelGrid>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgIngresoTramite" header="TRAMITE GENERADO" modal="true" width="700"
                  resizable="false" position="center" closable="false" closeOnEscape="false">
            <h:form id="formTramiteGenerado">
                <h:panelGrid columns="5" style="text-align: center;font-weight: bolder;">
                    <p:outputLabel value="NRO DE TRÁMITE:" style="font-size: 16px;"/>
                    <p:spacer width="20" height="1"/>
                    <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" 
                                   style="font-size: 30px;color: #0033FF"/>
                    <p:spacer width="40" height="1"/>
                    <p:commandButton value="ACEPTAR" icon="pi pi-thumbs-up" 
                                     actionListener="#{cobroRp.ingresarTramiteEgob()}" />
                </h:panelGrid>
                <p:dataTable id="actosTable" value="#{cobroRp.actosPorPagar}" var="detalles" lazy="false"
                             scrollable="true" scrollHeight="300" editable="true" editMode="cell" >
                    <p:column headerText="Contrato" >
                        <p:outputLabel value="#{detalles.acto.nombre}"/>
                    </p:column>
                    <p:column headerText="Comprobante" width="150">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{detalles.comprobante}" /></f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{detalles.comprobante}" />
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Referencia" width="150">
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{detalles.referencia}" /></f:facet>
                            <f:facet name="input"><p:inputNumber value="#{detalles.referencia}" 
                                                                 decimalPlaces="0" thousandSeparator=""/></f:facet>
                        </p:cellEditor>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgVerEditInfAdCorreo" header="Editar Información Adicional" widgetVar="dlgVerEditInfAdCorreo" resizable="false" 
                  closeOnEscape="true" modal="true" width="700" height="150">
            <h:form id="formInformAdicionalCorreo">
                <h:panelGrid columns="2">
                    <p:outputLabel value="No de Tramite:" style="font-weight: bold; font-size: 18px;color: #d2322d"/>
                    <p:outputLabel value="#{cobroRp.liquidacion.numTramiteRp}" style="font-weight: bold; font-size: 18px;"/>
                </h:panelGrid>
                <h:panelGrid columns="1" rendered="#{cobroRp.liquidacion.estadoPago.id eq 7}">
                    <p:outputLabel value="TRÁMITE INGRESADO EN LÍNEA" style="font-weight: bold; font-size: 18px; color: #0033FF;"/>
                </h:panelGrid>
                <h:panelGrid styleClass="noBorder" columns="1" style="width:100%;">
                    <h:panelGroup layout="block" style="width:100%;">
                        <h:outputText value="Correo del trámite:" style="font-weight:bold; margin-bottom:5px;" />
                        <p:outputPanel style="display:flex; width:100%; gap:5px;" layout="block">
                            <p:inputText id="correo_tramite"
                                         value="#{cobroRp.liquidacion.correoTramite}"
                                         style="flex:1;"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }" />

                            <p:commandButton icon="pi pi-pencil"
                                             process="correo_tramite"
                                             title="Actualizar Cambios"
                                             update=":mainForm:tablaLiq"
                                             actionListener="#{cobroRp.updateCorreoTramiteLiq()}"
                                             style="flex-shrink:0;" />
                        </p:outputPanel>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid styleClass="noBorder" columns="1" style="width:100%;">
                    <h:panelGroup layout="block" style="width:100%;">
                        <h:outputText value="Información Adicional:" style="font-weight:bold; margin-bottom:5px;" />
                        <p:outputPanel style="display:flex; width:100%; gap:5px;" layout="block">
                            <p:inputText id="info_adicional"
                                         value="#{cobroRp.liquidacion.infAdicionalProf}"
                                         style="flex:1;"
                                         onkeypress="if (event.keyCode == 13) {
                                                     return false;
                                                 }" />

                            <p:commandButton icon="pi pi-pencil"
                                             process="@this info_adicional"
                                             title="Actualizar Cambios"
                                             actionListener="#{cobroRp.updateInformacionAdicionalLiq()}"
                                             style="flex-shrink:0;" />
                        </p:outputPanel>
                    </h:panelGroup>
                </h:panelGrid>

            </h:form>
        </p:dialog>


    </ui:define>
</ui:composition>
