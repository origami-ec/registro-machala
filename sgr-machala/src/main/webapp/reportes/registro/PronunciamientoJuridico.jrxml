<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PronunciamientoJuridico" language="groovy" pageWidth="595" pageHeight="842" columnWidth="455" leftMargin="70" rightMargin="70" topMargin="0" bottomMargin="0" uuid="e70bf7b3-10e4-457b-953e-a72467c75fab">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="480"/>
	<style name="html" fill="Solid" markup="html" isBlankWhenNull="true" fontSize="10" isBold="true" isItalic="true" isUnderline="true" isStrikeThrough="true" pdfFontName="Helvetica" pdfEncoding="Cp1250" isPdfEmbedded="true"/>
	<style name="style_bold" isBold="true" isItalic="false" isUnderline="false" pdfFontName="Helvetica-Bold"/>
	<parameter name="ID_NOTA" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="WATERMARK_URL" class="java.lang.String"/>
	<parameter name="JURIDICA" class="java.lang.String"/>
	<parameter name="REGISTRADOR" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT nd.numero_documento, nd.fecha, li.inscripcion, nd.firma, nd.elaborado,
case e.es_persona when true then coalesce(e.nombres,'')||' '||coalesce(e.apellidos,'')
else e.razon_social end AS nota_para, nd.asunto, nd.elaborado, nd.fecha, nd.fecha_ingreso,
coalesce(eu.apellidos,'')  || ' ' ||  coalesce(eu.nombres,'') as hecho,
coalesce(ej.apellidos,'')  || ' ' ||  coalesce(ej.nombres,'') as juridica,
nd.detalle as descripcion, li.repertorio, li.fecha_ingreso as fecha_pago
FROM flow.regp_pronunciamiento_juridico nd
inner join app.cat_ente e on nd.para = e.id
left outer join app.acl_user us on us.usuario = nd.realizado
inner join app.cat_ente eu on us.ente = eu.id
left outer join app.acl_user uj on uj.usuario = nd.elaborado
inner join app.cat_ente ej on uj.ente = ej.id
left join flow.regp_liquidacion li on li.tramite = nd.tramite
where nd.ID = $P{ID_NOTA}]]>
	</queryString>
	<field name="numero_documento" class="java.lang.String"/>
	<field name="fecha" class="java.lang.String"/>
	<field name="inscripcion" class="java.lang.Boolean"/>
	<field name="firma" class="java.lang.String"/>
	<field name="elaborado" class="java.lang.String"/>
	<field name="nota_para" class="java.lang.String"/>
	<field name="asunto" class="java.lang.String"/>
	<field name="fecha_ingreso" class="java.sql.Timestamp"/>
	<field name="hecho" class="java.lang.String"/>
	<field name="juridica" class="java.lang.String"/>
	<field name="descripcion" class="java.lang.String"/>
	<field name="repertorio" class="java.lang.Integer"/>
	<field name="fecha_pago" class="java.sql.Timestamp"/>
	<background>
		<band height="840" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="-69" y="0" width="593" height="840" uuid="a157dd5e-8879-4e2a-a355-65e37cf5beb9"/>
				<imageExpression><![CDATA[$P{WATERMARK_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="90" splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="140" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="0" width="455" height="20" isPrintWhenDetailOverflows="true" uuid="4e767537-f529-4f18-a359-85df45ff787b"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Pronunciamiento Jurídico # " + $F{numero_documento}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="&apos;Playas, &apos; dd &apos;de&apos; MMMMM &apos;del&apos; yyyy" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="20" width="455" height="20" isPrintWhenDetailOverflows="true" uuid="c23cde17-fdca-4fef-8f5d-7c0ce434eac7"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ingreso}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="135" y="62" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="187b6788-a40b-4804-8ca8-ceb7a97c2022"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{asunto}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="62" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="17293e29-9033-4aea-9959-f42a9c0529b7"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Asunto:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="102" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="5b003e07-b5ad-477a-9f70-1ccaf4bacddd">
					<printWhenExpression><![CDATA[$F{inscripcion}]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Repertorio:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="0" y="82" width="135" height="20" isPrintWhenDetailOverflows="true" uuid="77df2570-2e04-4616-996f-153ab3b94870"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Fecha de Ingreso:"]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" pattern="dd &apos;de&apos; MMMMM &apos;del&apos; yyyy" isBlankWhenNull="true">
				<reportElement x="135" y="82" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="e4bb237d-fcb1-4156-bcfa-a174b47dcc51"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_pago}]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="135" y="102" width="320" height="20" isPrintWhenDetailOverflows="true" uuid="43fd5e8d-619b-470e-aec7-aad9169c5d3d">
					<printWhenExpression><![CDATA[$F{inscripcion}]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{repertorio}]]></textFieldExpression>
			</textField>
		</band>
		<band height="114">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="html" x="0" y="0" width="455" height="114" isPrintWhenDetailOverflows="true" uuid="f2168236-4cfd-4c48-b6eb-b589a513d4d0"/>
				<textElement textAlignment="Justified" verticalAlignment="Top" markup="html">
					<font size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfEncoding="Cp1252" isPdfEmbedded="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
		</band>
		<band height="95" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement style="style_bold" x="104" y="70" width="250" height="25" isPrintWhenDetailOverflows="true" uuid="89691448-8f3a-4a68-adcd-6881fe664d48"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{juridica}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="0" width="70" height="10" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="4202f26a-3f00-48e5-b354-9d74bc843454"/>
				<textElement verticalAlignment="Middle">
					<font size="7" isBold="false"/>
				</textElement>
				<text><![CDATA[Generado por:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="70" y="0" width="150" height="10" isPrintWhenDetailOverflows="true" uuid="539ce10d-6f58-457a-9dac-f4e5f264601f"/>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{elaborado}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="60" splitType="Stretch">
			<textField>
				<reportElement x="335" y="0" width="80" height="14" uuid="f9830bbb-6662-415f-afbb-e15d265d34cb"/>
				<textElement textAlignment="Right">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Pág. "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="415" y="0" width="40" height="14" uuid="f241d60d-62ad-4b8c-9974-f066b1d0a704"/>
				<textElement>
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
