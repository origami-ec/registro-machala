<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="CopiaRazonInscripcion" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="455" leftMargin="70" rightMargin="70" topMargin="0" bottomMargin="0" uuid="b0616992-c4f9-44e8-b8e6-4e352538c377">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="negrita" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String">
		<defaultValueExpression><![CDATA["C:\\Users\\Anyelo\\Desktop\\NetBeansProjects\\portoviejo-registro\\src\\main\\webapp\\reportes\\registro\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="ID_CERTIFICADO" class="java.lang.Long"/>
	<parameter name="REGISTRADOR" class="java.lang.String"/>
	<parameter name="HEADER_URL" class="java.lang.String"/>
	<parameter name="WATERMARK_URL" class="java.lang.String"/>
	<parameter name="FOOTER_URL" class="java.lang.String"/>
	<parameter name="NOMBRES" class="java.lang.String"/>
	<parameter name="FIRMA_DIGITAL" class="java.lang.String"/>
	<queryString>
		<![CDATA[select (to_char(ce.fecha_emision, 'yyyy')||'-'||ce.num_tramite)
as codigo_certificado, ce.num_certificado, ce.fecha_emision, ce.observacion
as solvencia, liq.codigo_comprobante, ce.fecha_creacion as fecha_certificado,
(select razon_reporte from app.reg_registrador where actual is true)
as accion_personal, ce.nombre_solicitante, ce.uso_documento,
ce.cod_verificacion, liq.tramite_online,
(select valor_string from conf.valores where code = 'URL_VALIDACION_DOCUMENTOS')
|| ce.cod_verificacion as qrcode,
num_tramite, cr.usuario as user_certificado,
(select valor from conf.contenido_reportes where code = 'NOTAS_ACLARATORIAS' and estado = 'A') as notas_aclaratorias,
cr.firma_nombre as firma_nombre1, cr.firma_cargo as firma_cargo1,
je.firma_nombre as firma_nombre2, je.firma_cargo as firma_cargo2, je.usuario as user_jefe
from app.reg_certificado ce
left join flow.regp_tareas_tramite tt on tt.id = ce.tarea_tramite
left join flow.regp_liquidacion_detalles ld on ld.id = tt.detalle
left join flow.regp_liquidacion liq on liq.id = ld.liquidacion
left join app.acl_user cr on (cr.id = ce.user_creador)
left join app.acl_user je on (je.id = ce.jefe_certificados)
where ce.id = $P{ID_CERTIFICADO}]]>
	</queryString>
	<field name="codigo_certificado" class="java.lang.String"/>
	<field name="num_certificado" class="java.lang.Long"/>
	<field name="fecha_emision" class="java.sql.Timestamp"/>
	<field name="solvencia" class="java.lang.String"/>
	<field name="codigo_comprobante" class="java.lang.String"/>
	<field name="fecha_certificado" class="java.sql.Timestamp"/>
	<field name="accion_personal" class="java.lang.String"/>
	<field name="nombre_solicitante" class="java.lang.String"/>
	<field name="uso_documento" class="java.lang.String"/>
	<field name="cod_verificacion" class="java.lang.String"/>
	<field name="tramite_online" class="java.lang.Boolean"/>
	<field name="qrcode" class="java.lang.String"/>
	<field name="num_tramite" class="java.lang.Long"/>
	<field name="user_certificado" class="java.lang.String"/>
	<field name="notas_aclaratorias" class="java.lang.String"/>
	<field name="firma_nombre1" class="java.lang.String"/>
	<field name="firma_cargo1" class="java.lang.String"/>
	<field name="firma_nombre2" class="java.lang.String"/>
	<field name="firma_cargo2" class="java.lang.String"/>
	<field name="user_jefe" class="java.lang.String"/>
	<background>
		<band height="842" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="-70" y="0" width="595" height="842" uuid="e16a321f-056d-4a36-bb33-bb6e8cb1cba2"/>
				<imageExpression><![CDATA[$P{WATERMARK_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="80" splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="34" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="18" width="455" height="13" uuid="48c70337-c2d2-43a0-953b-6d971333e640"/>
				<subreportParameter name="SUBREPORT_DIR">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="ID_CERTIFICADO">
					<subreportParameterExpression><![CDATA[$P{ID_CERTIFICADO}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "CopiaRazonInscripcion_contenido.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement style="negrita" mode="Opaque" x="0" y="0" width="455" height="16" backcolor="#CCCCCC" uuid="7030bfdd-51b7-4530-b1b8-9cb093aefc8e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[COPIA DE RAZÓN DE INSCRIPCIÓN]]></text>
			</staticText>
		</band>
		<band height="25" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="455" height="19" isRemoveLineWhenBlank="true" uuid="00267dca-256f-4535-bdf1-31c53d86e606">
					<printWhenExpression><![CDATA[$F{solvencia} != null && !$F{solvencia}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA["<style pdfFontName=\"Helvetica-Bold\">SOLVENCIA: </style> " +
$F{solvencia}.toUpperCase()]]></textFieldExpression>
			</textField>
		</band>
		<band height="20" splitType="Stretch">
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="455" height="11" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="359d3d74-728a-4c44-a4ea-4b4fd062c29a"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="none">
					<font size="6"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{notas_aclaratorias}]]></textFieldExpression>
			</textField>
		</band>
		<band height="116" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement style="negrita" isPrintRepeatedValues="false" x="0" y="74" width="250" height="42" isPrintWhenDetailOverflows="true" uuid="56524ab1-a99f-4d82-aa1a-93626a90dd5b"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{REGISTRADOR}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="355" y="0" width="100" height="12" isPrintWhenDetailOverflows="true" uuid="82ca22af-aae1-4e18-a09e-326b19b7bd1b">
					<printWhenExpression><![CDATA[$F{cod_verificacion} != null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<text><![CDATA[Código de Verificación:]]></text>
			</staticText>
			<textField>
				<reportElement style="negrita" x="355" y="12" width="100" height="14" isPrintWhenDetailOverflows="true" uuid="6a94bead-84f5-4d55-9bad-0a51058a49ad">
					<printWhenExpression><![CDATA[$F{cod_verificacion} != null]]></printWhenExpression>
				</reportElement>
				<textElement verticalAlignment="Middle">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cod_verificacion}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="365" y="26" width="90" height="90" isPrintWhenDetailOverflows="true" uuid="3c3c3c4b-9715-4984-9b6b-922221f56ba0">
					<printWhenExpression><![CDATA[$F{cod_verificacion} != null]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(
    new com.google.zxing.qrcode.QRCodeWriter().encode(
        $F{qrcode},
        com.google.zxing.BarcodeFormat.QR_CODE, 300, 300
    ))]]></imageExpression>
			</image>
		</band>
	</detail>
	<pageFooter>
		<band height="64" splitType="Stretch">
			<textField>
				<reportElement x="354" y="0" width="59" height="12" uuid="3cf6d0cc-4a60-4aa4-96e1-6fe575a8bc19"/>
				<textElement textAlignment="Right">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="413" y="0" width="42" height="12" uuid="6edb0fb7-b9be-4194-86ec-70dc568b0d93"/>
				<textElement>
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="270" y="35" width="70" height="11" isPrintWhenDetailOverflows="true" uuid="e106c72a-90a8-4eef-9e08-3c3dd82e935a"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<text><![CDATA[Fecha Emisión:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm" isBlankWhenNull="true">
				<reportElement x="340" y="35" width="100" height="11" isPrintWhenDetailOverflows="true" uuid="25f81366-de4b-47d5-b811-2569086d2ee4"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_emision}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="270" y="24" width="70" height="11" isPrintWhenDetailOverflows="true" uuid="b925fdc8-114f-4837-bfd9-8f98452679ff"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<text><![CDATA[N° Comprobante:]]></text>
			</staticText>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="340" y="24" width="100" height="11" isPrintWhenDetailOverflows="true" uuid="28bbb2fd-220f-4a1a-9b19-32240fc680d3"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo_comprobante}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="80" y="12" width="360" height="12" uuid="a7ed4f0c-2443-4ebe-8529-8fb44a1306fb"/>
				<box rightPadding="2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="7" isBold="false"/>
				</textElement>
				<text><![CDATA[VIGENCIA DEL CERTIFICADO TÉRMINO DE 60 DÍAS A PARTIR DE LA FECHA DE EMISIÓN]]></text>
			</staticText>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="150" y="35" width="100" height="11" isPrintWhenDetailOverflows="true" uuid="a0d18b70-0ccf-4901-91f7-33c3ce46fe07"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[java.lang.String.format("%08d", $F{num_certificado}) + "-" + $F{codigo_certificado}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="80" y="35" width="70" height="11" isPrintWhenDetailOverflows="true" uuid="badff1ba-a9c9-4460-824d-d9ba68a5f300"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<text><![CDATA[Nro. Certificado:]]></text>
			</staticText>
			<textField pattern="" isBlankWhenNull="true">
				<reportElement x="150" y="24" width="100" height="11" isPrintWhenDetailOverflows="true" uuid="0dca6555-8096-416f-995d-5cea0353d6a5"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{user_certificado}.toUpperCase()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="80" y="24" width="70" height="11" isPrintWhenDetailOverflows="true" uuid="b8683769-021b-4611-a6f0-05d15814fb29"/>
				<textElement verticalAlignment="Middle">
					<font size="6" isBold="false"/>
				</textElement>
				<text><![CDATA[Elaborado por:]]></text>
			</staticText>
		</band>
	</pageFooter>
</jasperReport>
