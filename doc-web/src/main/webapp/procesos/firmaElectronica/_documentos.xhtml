<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:comp="http://xmlns.jcp.org/jsf/composite/dialog"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


    <p:panelGrid id="pnlDocs" columns="2" layout="grid" style="margin-top: 5px; width: 98%; vertical-align: top !important" >
        <h:panelGroup id="panelSubirDoc">
            <p:fieldset legend="Nuevos documentos">
                <div align="rigth">
                    <p:commandButton value="Agregar" style="float: right" icon="fa fa-plus"  styleClass="info-button text-button rounded-button p-mr-2 p-mb-2" oncomplete="PF('DlgoDocumento').show()"/>
                </div>
                <br/>
                <br/>
                <br/>
                <p:dataTable id="docNuevos" value="#{firmaElectronicaDocMB.documentosNuevos}" var="doc"
                             emptyMessage="No existen documentos nuevos" rowIndexVar="i">
                    <p:column headerText="**" width="20">
                        <center>
                            #{i+1}
                        </center>
                    </p:column>
                    <p:column headerText="Fecha" width="70">
                        <p:outputLabel value="#{doc.fechaCreacion}" >
                            <f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Archivo" >
                        <p:outputLabel value="#{doc.nombreArchivo}" />
                    </p:column>
                    <p:column headerText="Acción" width="100">
                        <center>
                            <p:commandButton  icon="pi pi-bookmark" styleClass="info-button text-button rounded-button p-mr-2 p-mb-2" actionListener="#{firmaElectronicaDocMB.getPDF(doc)}"/>    
                            <p:commandButton update="docNuevos"  icon="fa fa-trash" styleClass="danger-button text-button rounded-button p-mr-2 p-mb-2" actionListener="#{firmaElectronicaDocMB.eliminarDocumento(doc)}"/>    
                        </center>
                    </p:column>
                </p:dataTable>
            </p:fieldset>
        </h:panelGroup>
        <h:panelGroup id="panelDocs">
            <p:fieldset legend="Documentos">
                <p:dataTable id="docs" value="#{firmaElectronicaDocMB.documentos}" var="doc"
                             emptyMessage="No existen documentos" rowIndexVar="i">

                    <p:column headerText="Fecha" width="65">
                        <p:outputLabel value="#{doc.fechaCreacion}" >
                            <f:convertDateTime pattern="dd-MM-yyyy HH:mm:ss" />
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Archivo" >
                        <p:outputLabel value="#{doc.nombreArchivo}" />
                    </p:column>
                    <p:column headerText="Firma Electrónica" width="52" >
                        <center>
                            <p:outputLabel value="SI" rendered="#{doc.tieneFirmaElectronica}"/>
                            <p:outputLabel value="NO" rendered="#{!doc.tieneFirmaElectronica}"/>
                        </center>
                    </p:column>
                    <p:column headerText="Acción" width="100">
                        <center>
                            <p:commandButton  icon="pi pi-bookmark" styleClass="info-button text-button rounded-button p-mr-2 p-mb-2" actionListener="#{firmaElectronicaDocMB.getPDF(doc)}"/>    
                            <p:commandButton  icon="pi pi-download" styleClass="info-button text-button rounded-button p-mr-2 p-mb-2" actionListener="#{firmaElectronicaDocMB.getDownloadValue(doc)}"/>    
                        </center>
                    </p:column>
                </p:dataTable>
            </p:fieldset>
        </h:panelGroup>
    </p:panelGrid>

</html>

