<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="CertificadoSiPoseeBien" language="groovy" pageWidth="595" pageHeight="842" columnWidth="470" leftMargin="45" rightMargin="80" topMargin="10" bottomMargin="10" uuid="e70bf7b3-10e4-457b-953e-a72467c75fab">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="192"/>
	<style name="negrita" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" pdfFontName="Helvetica-Bold"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Anyelo\\Desktop\\NetBeansProjects\\registro-portoviejo\\src\\main\\webapp\\reportes\\registro\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="USER_NAME" class="java.lang.String"/>
	<parameter name="ID_CERTIFICADO" class="java.lang.Long"/>
	<parameter name="EMISION" class="java.util.Date"/>
	<parameter name="NOMBRES" class="java.lang.String"/>
	<parameter name="REGISTRADOR" class="java.lang.String"/>
	<parameter name="HEADER_URL" class="java.lang.String"/>
	<parameter name="FOOTER_URL" class="java.lang.String"/>
	<parameter name="WATERMARK_URL" class="java.lang.String"/>
	<parameter name="ADICIONAL" class="java.lang.Boolean"/>
	<parameter name="FIRMA_DIGITAL" class="java.lang.String"/>
	<queryString>
		<![CDATA[select c.parroquia, c.num_certificado, en.ced_ruc, en.nombre, c.propietario,
c.observacion, c.con_bienes, to_char(c.fecha_emision, 'yyyy') as anio, c.linderos_registrales, c.beneficiario, c.num_tramite, c.nombre_solicitante, c.uso_documento, c.descripcion_bien,
liq.codigo_comprobante, (to_char(c.fecha_emision, 'yyyy')||'-'||c.num_tramite)
as codigo_certificado, liq.tramite_online,
(select razon_reporte from app.reg_registrador where actual is true) as accion_personal,
cod_verificacion,
coalesce(uc.apellidos, '') || ' ' || coalesce(uc.nombres, '') as user_certificado,
'https://www.rplojavirtual.gob.ec/api/certf/' || c.cod_verificacion as qrcode,
c.num_tramite
from app.reg_certificado c
left join app.acl_user cr on (cr.id = c.user_creador)
left join app.cat_ente uc on (uc.id = cr.ente)
left join app.reg_ente_interviniente en on (en.id = c.propietario)
left join flow.regp_tareas_tramite tt on tt.id = c.tarea_tramite
left join flow.regp_liquidacion_detalles ld on ld.id = tt.detalle
left join flow.regp_liquidacion liq on liq.id = ld.liquidacion
where c.id = $P{ID_CERTIFICADO}]]>
	</queryString>
	<field name="parroquia" class="java.lang.String"/>
	<field name="num_certificado" class="java.lang.Long"/>
	<field name="ced_ruc" class="java.lang.String"/>
	<field name="nombre" class="java.lang.String"/>
	<field name="propietario" class="java.lang.Long"/>
	<field name="observacion" class="java.lang.String"/>
	<field name="con_bienes" class="java.lang.Boolean"/>
	<field name="anio" class="java.lang.String"/>
	<field name="linderos_registrales" class="java.lang.String"/>
	<field name="beneficiario" class="java.lang.String"/>
	<field name="num_tramite" class="java.lang.Long"/>
	<field name="nombre_solicitante" class="java.lang.String"/>
	<field name="uso_documento" class="java.lang.String"/>
	<field name="descripcion_bien" class="java.lang.String"/>
	<field name="codigo_comprobante" class="java.lang.String"/>
	<field name="codigo_certificado" class="java.lang.String"/>
	<field name="tramite_online" class="java.lang.Boolean"/>
	<field name="accion_personal" class="java.lang.String"/>
	<field name="cod_verificacion" class="java.lang.String"/>
	<field name="user_certificado" class="java.lang.String"/>
	<field name="qrcode" class="java.lang.String"/>
	<background>
		<band height="700" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="30" y="300" width="410" height="220" uuid="e59d8d02-49d4-4774-b212-d5bf1719d964"/>
				<imageExpression><![CDATA[$P{WATERMARK_URL}]]></imageExpression>
			</image>
		</band>
	</background>
	<pageHeader>
		<band height="160" splitType="Stretch">
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle">
				<reportElement x="0" y="0" width="470" height="70" uuid="bffc1d04-f8f0-4f5f-a049-4f3539b9ddff"/>
				<imageExpression><![CDATA[$P{HEADER_URL}]]></imageExpression>
			</image>
			<staticText>
				<reportElement style="negrita" x="0" y="70" width="110" height="16" isPrintWhenDetailOverflows="true" uuid="e515472e-3284-4f52-96a9-7c64998b463a"/>
				<box rightPadding="5"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<text><![CDATA[CERTIFICADO N°]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement style="negrita" isPrintRepeatedValues="false" x="110" y="70" width="150" height="16" uuid="2e9cedc8-8d18-4f4e-998d-0ec6f6f5e192"/>
				<textElement verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[java.lang.String.format("%08d", $F{num_certificado})]]></textFieldExpression>
			</textField>
			<componentElement>
				<reportElement isPrintRepeatedValues="false" x="1" y="86" width="170" height="33" uuid="ace4b7a4-57cf-4bee-81a8-2b77dd3ec0f3"/>
				<jr:barbecue xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" type="Code39 (Extended)" drawText="false" checksumRequired="false">
					<jr:codeExpression><![CDATA[$F{num_tramite}]]></jr:codeExpression>
				</jr:barbecue>
			</componentElement>
			<staticText>
				<reportElement style="negrita" mode="Opaque" x="0" y="130" width="470" height="17" forecolor="#000000" backcolor="#CCCCCC" uuid="e3368f10-3528-416d-be15-21b0132ef0e9"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="13" isBold="false"/>
				</textElement>
				<text><![CDATA[CERTIFICADO DE ÚNICO BIEN]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement style="negrita" x="260" y="70" width="210" height="14" isPrintWhenDetailOverflows="true" uuid="fb93e295-9ea8-4d4c-b313-ce13aed2ddbc"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[($F{tramite_online} ? "Trámite En Línea: " : "Trámite: ") +
$F{codigo_certificado}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="110" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" positionType="Float" x="0" y="18" width="470" height="18" uuid="87d2ffe1-b379-46dc-be5f-65fd0efa7c14"/>
				<textElement verticalAlignment="Middle">
					<font size="11" isBold="false"/>
				</textElement>
				<text><![CDATA[CERTIFICA:]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="0" width="470" height="18" uuid="1a8bc784-b0a7-4884-a5f8-50a3fa713000"/>
				<textElement verticalAlignment="Middle">
					<font size="11"/>
				</textElement>
				<text><![CDATA[Revisado el SISTEMA INFORMÁTICO desde el año 1970:]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement x="0" y="36" width="470" height="16" isPrintWhenDetailOverflows="true" uuid="040e8523-cd35-4161-a915-e5eb5e3967c0"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font size="11"/>
					<paragraph lineSpacing="1_1_2"/>
				</textElement>
				<textFieldExpression><![CDATA["1.- Que a nombre de: <style pdfFontName=\"Helvetica-Bold\">" + $F{linderos_registrales}.toUpperCase() +
"</style> con CC/RUC/PAS N° <style pdfFontName=\"Helvetica-Bold\">" + $F{beneficiario} + "</style> " +
"SE ENCUENTRA INSCRITO UN BIEN INMUEBLE, ubicado en la parroquia " + $F{parroquia}.toUpperCase() + " bajo el número de inscripción " + $F{descripcion_bien} + " en el Registro de la Propiedad y Mercantil. "]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="0" y="52" width="470" height="16" isPrintWhenDetailOverflows="true" uuid="7b35ac07-0ff9-467b-a53d-2e05392af6a4"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font size="11"/>
					<paragraph lineSpacing="1_1_2"/>
				</textElement>
				<textFieldExpression><![CDATA["2.- Este Registro Público no se responsabiliza por los datos erróneos, inexactos o con omisiones que hayan sido proporcionados por los particulares y que puedan inducir o hayan inducido a error o equivocación a la entidad, así como del uso doloso o fraudulento del documento, en concordancia del art. 4 de la Ley Orgánica de Registro de Datos Públicos."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="0" y="68" width="470" height="16" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="a0714ae8-baae-4b6f-a0d1-c04d479bd2cd"/>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font size="11" isBold="false"/>
					<paragraph lineSpacing="1_1_2"/>
				</textElement>
				<textFieldExpression><![CDATA["3.- El presente certificado se lo extiende para los fines solicitados por <style pdfFontName=\"Helvetica-Bold\">" + $F{nombre_solicitante}.toUpperCase() +
"</style> el mismo que servirá para <style pdfFontName=\"Helvetica-Bold\">" + $F{uso_documento}.toUpperCase() + "</style> de acuerdo a la solicitud presentada por el usuario."]]></textFieldExpression>
			</textField>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" x="0" y="84" width="470" height="16" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="6c40fcd0-68fb-4b2d-9ab4-dc988615f484">
					<printWhenExpression><![CDATA[$F{accion_personal} != null && !$F{accion_personal}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Justified" verticalAlignment="Middle" markup="styled">
					<font size="11"/>
					<paragraph lineSpacing="1_1_2"/>
				</textElement>
				<textFieldExpression><![CDATA["4.- " + $F{accion_personal}]]></textFieldExpression>
			</textField>
		</band>
		<band height="206" splitType="Stretch">
			<staticText>
				<reportElement positionType="Float" x="130" y="40" width="340" height="40" isPrintWhenDetailOverflows="true" uuid="f93047f8-b2be-4526-9241-19034ed73db3"/>
				<box leftPadding="3">
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<text><![CDATA[1. Cualquier enmendadura, alteración o modificación al texto de este documento lo invalida.
2. El interesado debe comunicar cualquier novedad en este documento al Registro de la Propiedad y Mercantil.]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" x="60" y="16" width="239" height="12" isPrintWhenDetailOverflows="true" uuid="a91bb388-91e9-4a57-8f8c-b9ec3ce622e9"/>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{NOMBRES}]]></textFieldExpression>
			</textField>
			<textField pattern="dd MMMMM yyyy HH:mm" isBlankWhenNull="true">
				<reportElement positionType="Float" x="105" y="0" width="194" height="16" uuid="0d51d491-5fe2-4412-9e21-0421bfb45d59"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$P{EMISION}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" positionType="Float" x="0" y="16" width="60" height="12" isPrintWhenDetailOverflows="true" uuid="b6643b7f-dd0a-483b-ae75-759e7e3396d2"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Impreso por:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" positionType="Float" x="0" y="0" width="105" height="16" uuid="9988b199-82c6-4c64-9c21-2f1208d836fb"/>
				<textElement verticalAlignment="Middle">
					<font isBold="false"/>
				</textElement>
				<text><![CDATA[Fecha de Emisión:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" positionType="Float" x="0" y="28" width="60" height="12" isPrintWhenDetailOverflows="true" uuid="62824bad-985c-4544-b932-11f30a139edd"/>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Factura:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement positionType="Float" x="60" y="28" width="239" height="12" isPrintWhenDetailOverflows="true" uuid="4ba2f65b-3210-4ac2-9759-2c7a08cd7710"/>
				<textElement verticalAlignment="Middle">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo_comprobante}]]></textFieldExpression>
			</textField>
			<image>
				<reportElement x="384" y="120" width="86" height="86" isPrintWhenDetailOverflows="true" uuid="20185167-8181-4efc-9646-7e0739f05545">
					<printWhenExpression><![CDATA[$F{cod_verificacion} != null]]></printWhenExpression>
				</reportElement>
				<imageExpression><![CDATA[com.google.zxing.client.j2se.MatrixToImageWriter.toBufferedImage(
    new com.google.zxing.qrcode.QRCodeWriter().encode(
        $F{qrcode},
        com.google.zxing.BarcodeFormat.QR_CODE, 300, 300
    ))]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="315" y="80" width="155" height="16" isPrintWhenDetailOverflows="true" uuid="f67af417-c422-4b94-b908-a7e9d8dca26d">
					<printWhenExpression><![CDATA[$F{cod_verificacion} != null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<text><![CDATA[Código de Verificación]]></text>
			</staticText>
			<textField>
				<reportElement style="negrita" x="315" y="96" width="155" height="24" isPrintWhenDetailOverflows="true" uuid="7cfcd055-d41d-4d7e-bf7e-87df0fdb66e5">
					<printWhenExpression><![CDATA[$F{cod_verificacion} != null]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font size="18" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cod_verificacion}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement style="negrita" positionType="Float" x="0" y="150" width="250" height="28" isPrintWhenDetailOverflows="true" forecolor="#000000" uuid="c9448419-cd41-4535-9a4e-d9dd75de3988"/>
				<box>
					<topPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Top">
					<font size="11" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{REGISTRADOR}]]></textFieldExpression>
			</textField>
			<image scaleImage="FillFrame" hAlign="Center" vAlign="Middle" onErrorType="Blank">
				<reportElement x="80" y="116" width="90" height="34" isPrintWhenDetailOverflows="true" uuid="6cca691e-1a12-475d-98b4-85e5048fa185"/>
				<imageExpression><![CDATA[$P{FIRMA_DIGITAL}]]></imageExpression>
			</image>
			<textField isBlankWhenNull="true">
				<reportElement x="0" y="178" width="250" height="28" isPrintWhenDetailOverflows="true" uuid="b39cf092-e7b6-46af-bd29-acffac747f03">
					<printWhenExpression><![CDATA[$P{FIRMA_DIGITAL} != null && !$P{FIRMA_DIGITAL}.isEmpty()]]></printWhenExpression>
				</reportElement>
				<box>
					<topPen lineWidth="0.0"/>
				</box>
				<textElement verticalAlignment="Top" markup="html">
					<font size="11" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["Digitalmente firmado por: <br/>" +
"ENITH SILVANIA SALCEDO PALADINEZ"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement positionType="Float" x="0" y="40" width="130" height="40" isPrintWhenDetailOverflows="true" uuid="6713feba-642a-468d-af94-5348e7d261e8"/>
				<box>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Bottom">
					<font size="7" isBold="false"/>
				</textElement>
				<text><![CDATA[Firma de Responsabilidad]]></text>
			</staticText>
		</band>
	</detail>
	<pageFooter>
		<band height="52" splitType="Stretch">
			<textField evaluationTime="Report">
				<reportElement x="430" y="0" width="40" height="12" uuid="e4dff3fa-2f56-4eb8-a81d-3e60e2598d3b"/>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="370" y="0" width="59" height="12" uuid="34955d8f-c5a3-4a9b-9903-c311e565eec5"/>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA["Página: "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="1" y="0" width="369" height="12" uuid="6666df66-e501-43c9-9b4e-4f74b29b3089"/>
				<box rightPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font size="7" isBold="false"/>
				</textElement>
				<text><![CDATA[VALIDEZ DEL CERTIFICADO TÉRMINO DE 60 DÍAS A PARTIR DE LA FECHA DE EMISIÓN]]></text>
			</staticText>
			<image scaleImage="FillFrame" hAlign="Left" vAlign="Middle">
				<reportElement mode="Transparent" x="0" y="12" width="470" height="40" uuid="6c36e5ed-53ea-4991-bc12-f912d99d7386"/>
				<imageExpression><![CDATA[$P{FOOTER_URL}]]></imageExpression>
			</image>
		</band>
	</pageFooter>
</jasperReport>
