<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/template/bpmTemplate.xhtml">
    <ui:define name="title">Tipo de Datos</ui:define>
    <ui:define name="content">
        <h:form id="mainForm">
            <center><h2>TIPO DE DATO</h2></center>
            <p:tabView id="tabTipoDato" style="width: 700px;margin: 0 auto;">
                <p:tab title="Tipo Dato Simple">
                    <div align="right">
                        <p:commandButton value="Nuevo Dato Simple" icon="fa fa-plus-circle" disabled="false" 
                                         actionListener="#{tipoDatos.newTipoDato(1)}" />
                    </div><br/>
                    <p:dataTable value="#{tipoDatos.datosSimple}" var="datoS" paginator="true" rows="15"
                                 paginatorPosition="bottom">
                        <p:column headerText="Nombre">
                            <p:outputLabel value="#{datoS.nombre}"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <p:outputLabel value="#{datoS.descripcion}"/>
                        </p:column>
                        <p:column headerText="Estado">
                            <p:outputLabel value="#{datoS.estado}"/>
                        </p:column>
                        <p:column headerText="Opciones" width="50">
                            <p:commandLink title="Editar Archivador" class="btnTranparent editar" 
                                           actionListener="#{tipoDatos.showDlgEdit(datoS)}">
                                <i class="fa fa-edit blue2 Fs18" />
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </p:tab>
                <p:tab title="Tipo Dato Lista">
                    <div align="right">
                        <p:commandButton value="Nuevo Dato Lista" icon="fa fa-plus-circle" 
                                         actionListener="#{tipoDatos.newTipoDato(2)}"/>
                    </div><br/>
                    <p:dataTable value="#{tipoDatos.datosLista}" var="datoL" paginator="true" rows="15" 
                                 paginatorPosition="bottom">
                        <p:column headerText="Nombre">
                            <p:outputLabel value="#{datoL.nombre}"/>
                        </p:column>
                        <p:column headerText="Descripción">
                            <p:outputLabel value="#{datoL.descripcion}"/>
                        </p:column>
                        <p:column headerText="Estado">
                            <p:outputLabel value="#{datoL.estado}"/>
                        </p:column>
                        <p:column headerText="Options" width="50">
                            <p:commandLink title="Editar archivador" class="btnTranparent editar" actionListener="#{tipoDatos.showDlgEdit(datoL)}">
                                <i class="fa fa-edit blue2 Fs18" />
                            </p:commandLink>
                            <p:spacer width="10" height="1"/>
                            <p:commandLink title="Agregar detalle" class="btnTranparent editar" actionListener="#{tipoDatos.showDlgDetalles(datoL)}">
                                <i class="fa fa-plus blue2 Fs18" />
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </p:tab>
            </p:tabView>
        </h:form>

        <p:dialog showHeader="false" modal="true" widgetVar="dlgEdicion">
            <h:form id="formEdit">
                <p:outputLabel value="TIPO DATO SIMPLE" rendered="#{tipoDatos.tipo.tipo eq 1}" style="font-weight: bolder;size: 18px;"/>
                <p:outputLabel value="TIPO DATO LISTA" rendered="#{tipoDatos.tipo.tipo eq 2}" style="font-weight: bolder;size: 18px;"/>
                <p:panel header="INFORMACIÓN">
                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" 
                                 style="font-size: 14px;font-weight: bolder;color: blue;">
                        Nombre:
                        <p:inputText value="#{tipoDatos.tipo.nombre}" style="width: 200px;"/>
                        Descripcion:
                        <p:inputText value="#{tipoDatos.tipo.descripcion}" style="width: 200px;"/>
                        Estado:
                        <p:selectOneMenu value="#{tipoDatos.tipo.estado}" style="width: 200px;">
                            <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" />
                            <f:selectItem itemLabel="Activo" itemValue="A" />
                            <f:selectItem itemLabel="Inactivo" itemValue="I" />
                        </p:selectOneMenu>
                    </p:panelGrid>
                </p:panel><br/>
                <div align="center">
                    <p:commandButton value="Guardar" icon="fa fa-save" actionListener="#{tipoDatos.saveTipoDato()}"/>
                    <p:spacer height="1" width="20"/>
                    <p:commandButton value="Cancelar" icon="fa fa-close" oncomplete="PF('dlgEdicion').hide();"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog showHeader="false" modal="true" widgetVar="dlgAddDetalle">
            <h:form id="formDetalle">
                <p:outputLabel value="TIPO DATO LISTA" style="font-weight: bolder;size: 18px;"/>
                <p:dataTable value="#{tipoDatos.lista}" var="tip" paginator="true" rows="5" style="width: 300px;"
                             paginatorPosition="top">
                    <p:column headerText="Valor">
                        #{tip.valor}
                    </p:column>
                    <p:column headerText="Orden" width="40">
                        #{tip.orden}
                    </p:column>
                    <p:column headerText="Estado" width="40">
                        #{tip.estado}
                    </p:column>
                    <p:column headerText="Editar" width="40" style="text-align: center;">
                        <p:commandLink title="Editar Archivador" class="btnTranparent editar" 
                                       actionListener="#{tipoDatos.editarCompuesto(tip)}">
                            <i class="fa fa-edit blue2 Fs18" />
                        </p:commandLink>
                    </p:column>
                </p:dataTable><br/>
                <div align="center">
                    <p:commandButton value="Agregar Detalle" icon="fa fa-plus-circle" actionListener="#{tipoDatos.agregarCompuesto()}"/>
                    <p:spacer height="1" width="20"/>
                    <p:commandButton value="Cancelar" icon="fa fa-close" oncomplete="PF('dlgAddDetalle').hide();"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog showHeader="false" modal="true" widgetVar="dlgCompuesto">
            <h:form id="formCompuesto">
                <h5 style="margin-top: 0;text-align: center;">Tipo Dato Compuesto</h5>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" 
                             style="font-size: 14px;font-weight: bolder;color: blue;">
                    Tipo Dato:
                    <p:inputText value="#{tipoDatos.tdc.tipoDato.nombre}" style="width: 200px;" readonly="true"/>
                    Valor:
                    <p:inputText value="#{tipoDatos.tdc.valor}" style="width: 200px;"/>
                    Descripcion:
                    <p:inputText value="#{tipoDatos.tdc.descripcion}" style="width: 200px;"/>
                    Estado:
                    <p:selectOneMenu value="#{tipoDatos.tdc.estado}" style="width: 200px;">
                        <f:selectItem itemLabel="Seleccionar..." itemValue="#{null}" />
                        <f:selectItem itemLabel="Activo" itemValue="A" />
                        <f:selectItem itemLabel="Inactivo" itemValue="I" />
                    </p:selectOneMenu>
                    Orden:
                    <p:spinner value="#{tipoDatos.tdc.orden}" stepFactor="1" style="width: 200px;"/>
                </p:panelGrid>
                <div align="center">
                    <p:commandButton value="Guardar" icon="fa fa-save" actionListener="#{tipoDatos.saveCompuesto()}"/>
                </div>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>