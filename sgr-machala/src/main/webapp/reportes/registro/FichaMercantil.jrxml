<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="FichaMercantil" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="505" leftMargin="45" rightMargin="45" topMargin="20" bottomMargin="20" uuid="239ba6dc-edaa-45af-829a-d8b59f2a543d">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="negrita" pdfFontName="Helvetica-Bold"/>
	<parameter name="ID_FICHA" class="java.lang.Long"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:\\Users\\Origami Integrales\\Documents\\NetBeansProjects\\sgm\\src\\main\\webapp\\reportes\\registroPropiedad\\"]]></defaultValueExpression>
	</parameter>
	<parameter name="USER_NAME" class="java.lang.String"/>
	<queryString>
		<![CDATA[select ficha.fecha_ape, ficha.tipo_predio, ficha.clave_catastral, ficha.clave_catastral_old, ficha.linderos, ficha.id as id_tabla_ficha, ficha.num_ficha, ficha.url_foto,
parroquia.descripcion as nombre_parroquia, ficha.user_ingreso,
ficha.descripcion_bien as observacion, rtf.nombre as tipo_ficha
from app.reg_ficha as ficha
left join app.cat_parroquia as parroquia on (parroquia.id = ficha.parroquia)
left join app.reg_tipo_ficha as rtf on rtf.id = ficha.tipo_ficha
where ficha.id = $P{ID_FICHA}]]>
	</queryString>
	<field name="fecha_ape" class="java.sql.Timestamp"/>
	<field name="tipo_predio" class="java.lang.String"/>
	<field name="clave_catastral" class="java.lang.String"/>
	<field name="clave_catastral_old" class="java.lang.String"/>
	<field name="linderos" class="java.lang.String"/>
	<field name="id_tabla_ficha" class="java.lang.Long"/>
	<field name="num_ficha" class="java.lang.Long"/>
	<field name="url_foto" class="java.lang.String"/>
	<field name="nombre_parroquia" class="java.lang.String"/>
	<field name="user_ingreso" class="java.lang.String"/>
	<field name="observacion" class="java.lang.String"/>
	<field name="tipo_ficha" class="java.lang.String"/>
	<title>
		<band height="50" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" x="0" y="1" width="290" height="16" uuid="1d58a4a2-f78f-487a-a8f9-b4652c1b9b56"/>
				<textElement>
					<font size="10" isBold="false"/>
				</textElement>
				<text><![CDATA[Registro de la Propiedad del Cantón Machala]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement style="negrita" x="291" y="1" width="214" height="16" uuid="ba8ea75c-0ba0-4f67-b028-64be5e198edb"/>
				<textElement textAlignment="Right" verticalAlignment="Top">
					<font size="10" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["No.Ficha: " + $F{num_ficha}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE, dd MMMMM yyyy" isBlankWhenNull="true">
				<reportElement x="100" y="33" width="155" height="16" isPrintWhenDetailOverflows="true" uuid="c75030e2-4d27-4a07-bceb-012073879784"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{fecha_ape}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="342" y="33" width="163" height="16" isPrintWhenDetailOverflows="true" uuid="a97bcea3-9998-49cb-b729-f533c5e9dc8e"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{clave_catastral} != null ? $F{clave_catastral} : ""]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="0" y="33" width="100" height="16" isPrintWhenDetailOverflows="true" uuid="d1a37d12-ec3d-4c17-8a58-0f61e832737a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="false"/>
				</textElement>
				<text><![CDATA[Fecha de apertura:]]></text>
			</staticText>
			<staticText>
				<reportElement style="negrita" x="255" y="33" width="87" height="16" uuid="bbd69319-1bd4-4ea5-97a8-2a86a0a4f76a"/>
				<textElement verticalAlignment="Middle">
					<font isBold="false"/>
				</textElement>
				<text><![CDATA[Identf./Chasis:]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement style="negrita" mode="Opaque" x="1" y="17" width="504" height="16" backcolor="#CCCCCC" uuid="27bfa2d9-2c9e-459b-9242-0b51aa9d5822"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA["DETALLE DE " + $F{tipo_ficha}]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<detail>
		<band height="35" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" positionType="Float" x="1" y="0" width="250" height="16" uuid="384e1b7a-f97b-4daa-af18-ef97adbc7875"/>
				<textElement>
					<font isBold="false" isUnderline="true"/>
				</textElement>
				<text><![CDATA[1. DESCRIPCIÓN DE LA FICHA]]></text>
			</staticText>
			<textField isStretchWithOverflow="true" isBlankWhenNull="true">
				<reportElement positionType="Float" mode="Transparent" x="1" y="16" width="501" height="16" uuid="2d4da11e-8c60-41cd-8acd-61f7c73eba5e"/>
				<textElement textAlignment="Justified">
					<font size="10"/>
					<paragraph spacingAfter="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{linderos}.replaceAll( "\br", " ")]]></textFieldExpression>
			</textField>
		</band>
		<band height="80" splitType="Stretch">
			<subreport>
				<reportElement positionType="Float" x="0" y="58" width="505" height="20" isRemoveLineWhenBlank="true" uuid="0b30f04d-49b2-49f6-a233-8d70b720c7ee"/>
				<subreportParameter name="id_ficha">
					<subreportParameterExpression><![CDATA[$F{id_tabla_ficha}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "FichaDetalleTotalMovs.jasper"]]></subreportExpression>
			</subreport>
			<subreport runToBottom="false">
				<reportElement positionType="Float" x="0" y="37" width="505" height="20" isRemoveLineWhenBlank="true" uuid="519fffd3-b0a0-423b-a672-a5e4c6bbe5d5"/>
				<subreportParameter name="id_ficha">
					<subreportParameterExpression><![CDATA[$F{id_tabla_ficha}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="SUBREPORT_DIRINTERNO">
					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "FichaDetalleMovimiento.jasper"]]></subreportExpression>
			</subreport>
			<subreport>
				<reportElement positionType="Float" x="0" y="16" width="505" height="20" isRemoveLineWhenBlank="true" uuid="376731b4-9a94-40a7-89a0-fc7c6ac21a9b"/>
				<subreportParameter name="id_ficha">
					<subreportParameterExpression><![CDATA[$F{id_tabla_ficha}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "FichaDetalleResumenMovs.jasper"]]></subreportExpression>
			</subreport>
			<staticText>
				<reportElement style="negrita" positionType="Float" x="0" y="0" width="291" height="16" uuid="0a862b6c-0cf1-4c3c-8c01-e35665854fb5"/>
				<textElement>
					<font isBold="false" isUnderline="true"/>
				</textElement>
				<text><![CDATA[2. RESUMEN DE MOVIMIENTOS REGISTRALES]]></text>
			</staticText>
		</band>
		<band height="60" splitType="Stretch">
			<staticText>
				<reportElement style="negrita" x="1" y="28" width="84" height="14" isPrintWhenDetailOverflows="true" uuid="0b43eecb-4d5d-47b2-b229-390bea885005"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Impreso por:]]></text>
			</staticText>
			<textField>
				<reportElement style="negrita" x="85" y="28" width="183" height="14" uuid="dc47752f-481f-4377-a7c3-e419126d86c8"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{USER_NAME}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="1" y="0" width="84" height="14" isPrintWhenDetailOverflows="true" uuid="c1961204-11ea-4d20-8132-34fe08fe0eb0"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Creado por:]]></text>
			</staticText>
			<textField>
				<reportElement style="negrita" x="85" y="0" width="183" height="14" uuid="5cccca54-f2a6-4254-9401-882aaf28ccb7"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{user_ingreso}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="1" y="14" width="84" height="14" isPrintWhenDetailOverflows="true" uuid="9edfc82d-6306-460e-9c98-817994ff4f49"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Fecha de Apertura:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH.mm.ss" isBlankWhenNull="true">
				<reportElement style="negrita" positionType="Float" x="85" y="14" width="183" height="14" uuid="7b6b6548-c2f9-4998-a161-54afdd2f3bc0"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{fecha_ape}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="1" y="42" width="84" height="14" isPrintWhenDetailOverflows="true" uuid="0990c6a2-728e-438f-a7fb-6d0a51a29a88"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[Fecha de Impresión:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy HH:mm" isBlankWhenNull="true">
				<reportElement style="negrita" x="85" y="42" width="183" height="14" uuid="d34725a0-30ce-4dfa-9755-f5032474fa29"/>
				<textElement verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="23" splitType="Stretch">
			<textField>
				<reportElement x="423" y="1" width="52" height="20" uuid="15595584-b0fb-42a2-8b14-c26e87bf4aa1"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA["Página: "+$V{PAGE_NUMBER}+" de"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement x="477" y="1" width="28" height="20" uuid="5235b8b5-8800-4915-bf6f-d819b4082772"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement style="negrita" x="1" y="3" width="60" height="20" uuid="2ce96ce3-869d-4be3-8ba1-1843298e6725"/>
				<box rightPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="8" isBold="false"/>
				</textElement>
				<text><![CDATA[No. Ficha]]></text>
			</staticText>
			<textField isBlankWhenNull="true">
				<reportElement x="61" y="3" width="150" height="20" uuid="3d7dc48b-398d-467a-8174-237959ffa0a5"/>
				<box leftPadding="2"/>
				<textElement verticalAlignment="Middle">
					<font size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{num_ficha}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
