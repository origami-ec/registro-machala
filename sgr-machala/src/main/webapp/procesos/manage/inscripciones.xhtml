<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    template="/template/bpmTemplate.xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <ui:define name="title">Inscripciones Ingresadas</ui:define>
    <ui:define name="content">
        <style type="text/css">
            .ui-selectcheckboxmenu-panel .ui-selectcheckboxmenu-header .ui-chkbox {
                visibility: hidden;
            }
            .ui-filter-column .ui-column-customfilter .custom-filter {
                width: 100%;
                box-sizing: border-box;
            }

            .tipo-cero {

                color: #192a37 !important;
            }
            .tipo-uno {
                background-color: #FDE7B3 !important;
                color: #192a37 !important;
            }
            .tipo-dos {
                background-color: #E5BEB5 !important;
                color: #192a37 !important;
            }
            .tipo-tres {
                color: red !important;
            }
        </style>
        <h:form id="mainForm">
            <style>
                .propiedades {
                    background-color: #FDE7B3 !important;
                    color: #192a37 !important;
                }
                .gravamenes {
                    background-color: #E5BEB5 !important;
                    color: #192a37 !important;
                }
            </style>
            <center><h2>INSCRIPCIONES INGRESADAS</h2></center>
            <p:dataTable id="dtMovimientos" reflow="true" paginator="true" lazy="true" rows="15" 
                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         value="#{inscripciones.movimientosLazy}" var="mov" emptyMessage="No se encontró ningún Item." 
                         filterEvent="enter" resizableColumns="true">
                <p:column headerText="Libro" filterBy="#{mov.libro.nombre}" filterStyle="width: 95%">
                    <h:outputText value="#{mov.libro.nombre}" style="text-transform: uppercase;"/>
                </p:column>
                <p:column headerText="Acto" filterBy="#{mov.acto.nombre}" filterStyle="width: 95%">
                    <h:outputText  value="#{mov.acto.nombre}" style="text-transform: uppercase;"/>
                </p:column>
                <p:column headerText="Nro Trámite" filterBy="#{mov.tramite.tramite.numTramite}" filterStyle="width: 95%"  width="80">
                    <h:outputText value="#{mov.tramite.tramite.numTramite}" />
                </p:column>
                <p:column headerText="Repertorio" filterBy="#{mov.numRepertorio}" filterStyle="width: 95%"  width="80">
                    <h:outputText value="#{mov.numRepertorio}"/>
                </p:column>
                <p:column headerText="Año.Rep." filterBy="#{mov.anioRep}" width="80">
                    <h:outputText value="#{mov.fechaRepertorio}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                </p:column>
                <p:column headerText="Inscripcion" filterBy="#{mov.numInscripcion}" filterStyle="width: 95%" width="80">
                    <h:outputText value="#{mov.numInscripcion}"/>
                </p:column>
                <p:column headerText="Año.Ins." filterBy="#{mov.anioIns}" width="80">
                    <h:outputText value="#{mov.fechaInscripcion}"><f:convertDateTime pattern="dd/MM/yyyy"/></h:outputText>
                </p:column>
                <p:column headerText="Sec." filterBy="#{mov.indice}" width="30" filterStyle="width: 99%" >
                    <p:outputLabel value="#{mov.indice}"/>
                </p:column>
                <p:column headerText="Opciones" width="150">
                    <p:commandButton icon="pi pi-pencil" actionListener="#{inscripciones.editarInscripcion(mov)}" 
                                     style="background-color: darkcyan;" title="Editar Inscripción"/>
                    <p:spacer width="5"/>
                    <p:commandButton icon="pi pi-file-pdf" actionListener="#{inscripciones.showDlgDocumentos(mov)}" 
                                     style="background-color: orangered;" title="Acta y Razón"/>
                    <p:spacer width="5"/>
                    <p:commandButton icon="pi pi-align-right" title="Marginaciones" style="background-color: peru;"
                                     actionListener="#{inscripciones.showDlgMarginaciones(mov)}"/>
                    <p:spacer width="5"/>
                    <p:commandButton icon="pi pi-folder" actionListener="#{inscripciones.showDlgMovSelect(mov)}" 
                                     title="Visualizar Datos"/>
                </p:column>
            </p:dataTable>
        </h:form>

        <!-- carpeta azul -->
        <p:dialog id="dlgMovimientoRegistral" header="Movimiento Registral Seleccionado" widgetVar="dlgMovRegSelec"
                  resizable="false" modal="true" closeOnEscape="true" width="900" height="490" style="font-size: 12px;">
            <h:form id="formMovRegSelec">
                <h:panelGrid columns="2" style="font-weight: bolder;width: 100%;">
                    <h:panelGroup>
                        Naturaleza/Libro:<br/>
                        <p:inputText value="#{inscripciones.movimiento.libro.nombre}" readonly="true" style="width: 100%;"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Contrato/Acto:<br/>
                        <p:inputText value="#{inscripciones.movimiento.acto.nombre}" readonly="true" style="width: 100%;"/>
                    </h:panelGroup>
                </h:panelGrid>
                <h:panelGrid columns="4" style="font-weight: bolder;width: 100%;">
                    <h:panelGroup>
                        No. Repertorio:<br/>
                        <p:inputText  value="#{inscripciones.movimiento.numRepertorio}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Fecha Inscripción:<br/>
                        <p:inputText value="#{inscripciones.movimiento.fechaRepertorio}" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        No. Inscripción:<br/>
                        <p:inputText value="#{inscripciones.movimiento.numInscripcion}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Fecha Inscripción:<br/>
                        <p:inputText value="#{inscripciones.movimiento.fechaInscripcion}" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </h:panelGroup>

                    <h:panelGroup>
                        Secuencia:<br/>
                        <p:inputText  value="#{inscripciones.movimiento.indice}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        No. Tomo:<br/>
                        <p:inputText value="#{inscripciones.movimiento.numTomo}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Folio Inicio:<br/>
                        <p:inputText value="#{inscripciones.movimiento.folioInicio}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Folio Fin:<br/>
                        <p:inputText value="#{inscripciones.movimiento.folioFin}" readonly="true"/>
                    </h:panelGroup>

                    <h:panelGroup>
                        Notaría/Juz.:<br/>
                        <p:inputText value="#{inscripciones.movimiento.enteJudicial.nombre}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Cantón Not./Juz.:<br/>
                        <p:inputText value="#{inscripciones.movimiento.domicilio.nombre}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Fech/Otorg.:<br/>
                        <p:inputText value="#{inscripciones.movimiento.fechaOto}" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        Esc./Juicio/Prov./Res.:<br/>
                        <p:inputText value="#{inscripciones.movimiento.escritJuicProvResolucion}" readonly="true"/>
                    </h:panelGroup>
                </h:panelGrid>
                <p:tabView id="tvMovimiento">
                    <p:tab title="Intervinientes">
                        <p:dataTable emptyMessage="No hay datos para mostrar..." var="inter" scrollable="true" 
                                     value="#{inscripciones.modelo.listMovCli}" scrollHeight="180" >
                            <p:column headerText="C.I/R.U.C" width="100">
                                <p:outputLabel value="#{inter.enteInterv.cedRuc}"/>
                            </p:column>
                            <p:column headerText="Nombre del Cliente">
                                <p:outputLabel value="#{inter.enteInterv.nombre}"/>
                            </p:column>
                            <p:column headerText="Papel" width="100">
                                <p:outputLabel value="#{inter.papel.papel}"/>
                            </p:column>
                            <p:column headerText="estado" width="100">
                                <p:outputLabel value="#{inter.estado}"/>
                            </p:column>
                            <p:column headerText="Domicilio" width="100">
                                <p:outputLabel value="#{inter.domicilio.nombre}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Partes" rendered="false">
                        <p:tabView id="tabPartes">
                            <p:tab title="Representantes">
                                <p:dataTable id="dtrepresentantes" value="#{inscripciones.modelo.listMovRep}" var="repr" emptyMessage="No se encontró Representantes" rowIndexVar="indexRepr"
                                             resizableColumns="true" liveResize="true" scrollable="true" scrollHeight="200" style="text-align: center;">
                                    <p:column headerText="No" width="20">
                                        #{indexRepr+1}
                                    </p:column>
                                    <p:column headerText="CI/RUC/DOC" width="100">
                                        <p:outputLabel value="#{repr.enteInterv.cedRuc}"/>
                                    </p:column>
                                    <p:column headerText="Nombres">
                                        <p:outputLabel value="#{repr.enteInterv.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Cargo" width="150">
                                        <p:outputLabel value="#{repr.cargo.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Domicilio" width="100">
                                        <p:outputLabel value="#{repr.domicilio.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Tiempo" width="50">
                                        <p:outputLabel value="#{repr.codTiempo.valor}"/>
                                    </p:column>
                                    <p:column headerText="Plazo" width="50">
                                        <p:outputLabel value="#{repr.tiempo}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Socios">
                                <p:dataTable id="dtsocios" value="#{inscripciones.modelo.listMovSoc}" var="socio" emptyMessage="No se encontró Socios" rowIndexVar="indexSocio"
                                             resizableColumns="true" liveResize="true" scrollable="true" scrollHeight="200" style="text-align: center;">
                                    <p:column headerText="No" width="20">
                                        #{indexSocio+1}
                                    </p:column>
                                    <p:column headerText="CI/RUC/DOC" width="100">
                                        <p:outputLabel value="#{socio.enteInterv.cedRuc}"/>
                                    </p:column>
                                    <p:column headerText="Nombres">
                                        <p:outputLabel value="#{socio.enteInterv.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Participacion" width="200">
                                        <p:outputLabel value="#{socio.tipoParticipacion.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Cant./Unid." width="80">
                                        <p:outputLabel value="#{socio.cantidad}"><f:convertNumber maxFractionDigits="2"/></p:outputLabel>
                                    </p:column>
                                    <p:column headerText="Valor/Total" width="80">
                                        <p:outputLabel value="#{socio.valor}"><f:convertNumber maxFractionDigits="2"/></p:outputLabel>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                            <p:tab title="Capital">
                                <p:dataTable id="dtcapitales" value="#{inscripciones.modelo.listMovCap}" var="cap" emptyMessage="No se encontró Capitales" rowIndexVar="capIndex"
                                             scrollable="true" scrollHeight="250" style="width: 700px;margin: 0 auto;text-align: center;">
                                    <p:column headerText="No" width="40">
                                        #{capIndex+1}
                                    </p:column>
                                    <p:column headerText="Tipo Capital">
                                        <p:outputLabel value="#{cap.capital.nombre}"/>
                                    </p:column>
                                    <p:column headerText="Valor" style="text-align: right;" width="200">
                                        <p:outputLabel value="#{cap.valor}"><f:convertNumber type="currency" currencySymbol="$"/></p:outputLabel>
                                    </p:column>
                                </p:dataTable>
                            </p:tab>
                        </p:tabView>
                    </p:tab>
                    <p:tab title="Bienes">
                        <p:dataTable value="#{inscripciones.modelo.fichas}" var="fich" style="width: 100%;text-align: center" 
                                     scrollable="true" resizableColumns="true" emptyMessage="No se encontraron elementos..."
                                     scrollHeight="230" rowIndexVar="rowIndex" >
                            <p:column headerText="No" width="30">
                                #{rowIndex+1}
                            </p:column>
                            <p:column headerText="No Ficha" width="100">
                                <p:outputLabel value="#{fich.numFicha}"/>
                            </p:column>
                            <p:column headerText="Descripción">
                                <h:outputText id="descFricha" value="#{fich.descripcionBien}"/>
                                <p:tooltip for="descFricha" value="#{fich.descripcionBien}" position="top" />
                            </p:column>
                            <p:column headerText="Parroquia" rendered="false">
                                <p:outputLabel value="#{fich.parroquia.descripcion}"/>
                            </p:column>
                            <p:column headerText="Clave Catastral" rendered="false">
                                <p:outputLabel value="#{fich.claveCatastral}"/>
                            </p:column>
                            <p:column headerText="Ver Detalle" width="60">
                                <!--  <p:commandButton icon="pi pi-search" 
                                                 title="Ver Información de Ficha"
                                                 actionListener="# {inscripciones.seleccionarFicha(fich)}"
                                                 styleClass="rounded-button ui-button-info ui-button-flat"/> -->      

                                <p:commandLink title="Ver Información de Ficha"
                                               actionListener="#{inscripciones.seleccionarFicha(fich)}">
                                    <i class="pi pi-folder-open" style="font-size: 1.5em; margin-right: 5px;color: darkred;"></i>
                                </p:commandLink>
                            </p:column>

                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Observación">
                        <p:inputTextarea value="#{inscripciones.movimiento.observacion}" readonly="true" 
                                         autoResize="false" scrollHeight="200" style="width: 100%; height: 150px;"/>
                    </p:tab>
                    <p:tab title="Referencias">
                        <p:dataTable style="width: 100%" scrollable="true" scrollHeight="230"  
                                     rowIndexVar="indexMovRef" value="#{inscripciones.modelo.listMovRef}" var="movRef"
                                     emptyMessage="Movimiento sin referencia(s)." resizableColumns="true">
                            <p:column headerText="No" width="20">
                                #{indexMovRef+1}
                            </p:column>
                            <p:column headerText="Libro" rendered="false">
                                <p:outputLabel value="#{movRef.movimientoReferencia.libro.nombre}"/>
                            </p:column>
                            <p:column headerText="Acto">
                                <p:outputLabel id="textActo" value="#{movRef.movimientoReferencia.acto.nombre}"/>
                                <p:tooltip for="textActo" value="#{movRef.movimientoReferencia.acto.nombre}" position="top"/>
                            </p:column>
                            <p:column headerText="Tomo" width="60">
                                <p:outputLabel value="#{movRef.movimientoReferencia.numTomo}"/>
                            </p:column>
                            <p:column headerText="Sec." width="20">
                                <p:outputLabel value="#{movRef.movimientoReferencia.indice}"/>
                            </p:column>
                            <p:column headerText="Repertorio" width="80">
                                <p:outputLabel value="#{movRef.movimientoReferencia.numRepertorio}"/>
                            </p:column>
                            <p:column headerText="Inscripcion" width="80">
                                <p:outputLabel value="#{movRef.movimientoReferencia.numInscripcion}"/>
                            </p:column>
                            <p:column headerText="Fecha Insc." width="80">
                                <p:outputLabel value="#{movRef.movimientoReferencia.fechaInscripcion}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:outputLabel>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Marginaciones">
                        <p:dataTable style="width: 100%" scrollable="true" scrollHeight="200" 
                                     rowIndexVar="indexMovMarg" value="#{inscripciones.modelo.marginaciones}" var="movMarg"
                                     emptyMessage="Movimiento sin referencia(s)." resizableColumns="false">
                            <p:column headerText="No" width="20">
                                #{indexMovMarg+1}
                            </p:column>
                            <p:column headerText="Fecha" width="100">
                                <p:outputLabel value="#{movMarg.fechaIngreso}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:outputLabel>
                            </p:column>
                            <p:column headerText="Usuario" width="100">
                                <p:outputLabel value="#{movMarg.usuario}"/>
                            </p:column>
                            <p:column headerText="Marginación">
                                <p:outputLabel value="#{movMarg.observacion}" rendered="#{movMarg.estado}"/>
                                <p:outputLabel value="#{movMarg.observacion}" rendered="#{!movMarg.estado}" 
                                               style="text-decoration: line-through;"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Documentos">
                        <p:panelGrid columns="3" styleClass="ui-panelgrid-blank"
                                     style="font-weight: bolder;text-align: center;margin: 0 auto;">
                            <p:outputLabel value="Digitalización"/>
                            <p:spacer width="40"/>
                            <p:outputLabel value="Bitácora"/>
                            <p:commandLink  actionListener="#{inscripciones.visualizaScann()}">
                                <p:graphicImage value="/resources/icons/documents.png" height="90"/>
                            </p:commandLink>
                            <p:spacer width="40"/>
                            <p:commandLink actionListener="#{inscripciones.imprimirBitacora()}">
                                <p:graphicImage value="/resources/icons/buscar-archivo.png" height="90"/>
                            </p:commandLink>
                        </p:panelGrid>
                    </p:tab>
                    <p:tab title="Habilitar" rendered="#{inscripciones.habilitarEdicion}">
                        <h:panelGrid columns="1" style="font-weight: bolder;text-align: center;margin: 0 auto;">
                            <p:outputLabel value="Habilita la edición para los inscriptores"/>
                            <p:commandLink title="Habilitar Edición" actionListener="#{inscripciones.permitirEdicion()}" >
                                <p:graphicImage value="/resources/icons/firma.jpg" height="90"/>
                            </p:commandLink>
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="Firmar" rendered="#{inscripciones.habilitarFima}">
                        <h:panelGrid columns="3" style="font-weight: bolder;text-align: center;margin: 0 auto;">
                            <p:outputLabel value="Firma Razón de Inscripción"/>
                            <p:spacer width="40"/>
                            <p:outputLabel value="Firma Acta de Inscripción"/>
                            <p:commandLink title="Firmar Razón" 
                                           actionListener="#{inscripciones.firmarRazonInscripcion(inscripciones.movimiento)}"  >
                                <p:graphicImage value="/resources/icons/archivo_firmado.png" height="90"/>
                            </p:commandLink>
                            <p:spacer width="40"/>
                            <p:commandLink title="Firmar Acta" 
                                           actionListener="#{inscripciones.firmarActaInscripcion(inscripciones.movimiento)}"  >
                                <p:graphicImage value="/resources/icons/kmenuedit.png" height="90"/>
                            </p:commandLink>
                        </h:panelGrid>
                    </p:tab>
                </p:tabView>
            </h:form>
            <!-- carpeta azul -->
        </p:dialog>
        <!--Detalle Ficha-->
        <p:dialog id="dlgFichaDetalle" 
                  header="Información de la Ficha Registral" 
                  widgetVar="dlgFichaDetalle" 
                  position="right bottom"
                  resizable="true" 
                  modal="false" 
                  closeOnEscape="true" 
                  height="450" width="960"
                  style="font-size: 12px;">

            <h:form id="formFichaSelect">
                <h:panelGrid style="font-weight: bolder;width: 100%;" columns="3">
                    <h:panelGroup>
                        Nro. de Ficha:<br/>
                        <p:inputText value="#{inscripciones.fichaSeleccionada.numFicha}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Parroquia:<br/>
                        <p:inputText value="#{inscripciones.fichaSeleccionada.parroquia.descripcion}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Clave Catastral:<br/>
                        <p:inputText value="#{inscripciones.fichaSeleccionada.claveCatastral}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Tipo de Predio:<br/>
                        <p:inputText value="URBANO" rendered="#{inscripciones.fichaSeleccionada.tipoPredio eq 'U'}" readonly="true" style="width: 100%"/>
                        <p:inputText value="RURAL" rendered="#{inscripciones.fichaSeleccionada.tipoPredio eq 'R'}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Descripción:<br/>
                        <p:inputText value="#{inscripciones.fichaSeleccionada.direccionBien}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                    <h:panelGroup >
                        Estado Ficha:<br/>
                        <p:inputText value="#{inscripciones.fichaSeleccionada.estado.valor}" readonly="true" style="width: 100%"/>
                    </h:panelGroup>
                </h:panelGrid>

                <h:panelGrid style="font-weight: bolder;width: 100%;" columns="3">
                    <h:panelGroup>
                        Disponibilidad:<p:spacer width="20"/>
                        <p:outputLabel value="DISPONIBLE" style="font-size: 18px;color: blue;font-weight: bolder;" 
                                       rendered="#{inscripciones.fichaSeleccionada.userControlCalidad ne null}"/>
                        <p:outputLabel value="NO DISPONIBLE" style="font-size: 18px;color: red;font-weight: bolder;" 
                                       rendered="#{inscripciones.fichaSeleccionada.userControlCalidad eq null}"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Cantidad de Grav.:
                        <p:inputText value="#{inscripciones.fichaSeleccionada.cantidadGravamenes}" readonly="true" size="5"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Gravámen Cerrado:
                        <p:selectBooleanCheckbox value="#{inscripciones.fichaSeleccionada.bloqueado}" disabled="true"/>
                    </h:panelGroup>
                </h:panelGrid>

                <p:tabView id="tabDatosFicha">

                    <p:tab title="Linderos Registrales">
                        <h:panelGrid columns="1" style="width: 100%;">
                            <p:outputLabel value="Ubicación:" style="font-weight: bolder;"/>
                            <p:inputTextarea value="#{inscripciones.fichaSeleccionada.descripcionBien}" 
                                             style="width: 100%;" rows="2" readonly="true" autoResize="false" />

                            <p:outputLabel value="Linderos:" style="font-weight: bolder;"/>
                            <p:inputTextarea value="#{inscripciones.fichaSeleccionada.linderos}" 
                                             style="width: 100%;" rows="5" readonly="true" autoResize="false"/>

                            <p:outputLabel value="Superficie:" style="font-weight: bolder;"/>
                            <p:inputText value="#{inscripciones.fichaSeleccionada.superficie}" style="width: 100%;" readonly="true" />
                        </h:panelGrid>
                    </p:tab>

                    <p:tab title="Movimientos Registrales">
                        <p:dataTable value="#{inscripciones.movimientosFichas}" var="mf"
                                     scrollable="true" scrollHeight="240" rowIndexVar="rowIndex"
                                     resizableColumns="true"
                                     rowStyleClass="#{mf.movimiento.acto.isCancelacion() ? 'tipo-tres' : mf.movimiento.libro.tipo == 1 ? 'tipo-uno' : mf.movimiento.libro.tipo == 2 ? 'tipo-dos' : 'tipo-cero'}">

                            <p:column headerText="No" width="15">
                                #{rowIndex+1}
                            </p:column>
                            <p:column headerText="Libro">
                                <p:outputLabel id="libroMovFicha" value="#{mf.movimiento.libro.nombre}" style="text-transform: uppercase;"/>
                                <p:tooltip for="libroMovFicha" value="#{mf.movimiento.libro.nombre}" position="top" />
                            </p:column>
                            <p:column headerText="Acto" >
                                <p:outputLabel id="actoMovFicha" value="#{mf.movimiento.acto.nombre}" style="text-transform: uppercase;"/>
                                <p:tooltip for="actoMovFicha" value="#{mf.movimiento.acto.nombre}" position="top" />
                            </p:column>
                            <p:column headerText="Tomo" width="30">
                                <p:outputLabel value="#{mf.movimiento.numTomo}"/>
                            </p:column>
                            <p:column headerText="Repertorio" width="60">
                                <p:outputLabel value="#{mf.movimiento.numRepertorio}"/>
                            </p:column>
                            <p:column headerText="Inscripción" width="60">
                                <p:outputLabel value="#{mf.movimiento.numInscripcion}"/>
                            </p:column>
                            <p:column headerText="Sec." width="15">
                                <p:outputLabel value="#{mf.movimiento.indice}"/>
                            </p:column>
                            <p:column headerText="Fec.Inscripc." width="70">
                                <p:outputLabel value="#{mf.movimiento.fechaInscripcion}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="PDF" width="30" style="text-align: center;">
                                <p:commandLink 
                                    title="Ver Documento Escaneado"
                                    actionListener="#{inscripciones.visualizaScann(mf.movimiento)}">
                                    <i class="pi pi-file-pdf" style="font-size: 1.5em; margin-right: 5px;"></i>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Propietarios">
                        <p:dataTable value="#{inscripciones.fichaSeleccionada.regFichaPropietariosCollection}" var="pro" rowIndexVar="rowIndexProp" 
                                     resizableColumns="true" scrollable="true" scrollHeight="240" lazy="false">
                            <p:column headerText="No" width="30">
                                #{rowIndexProp+1}
                            </p:column>
                            <p:column headerText="CI/RUC" width="150">
                                <p:outputLabel value="#{pro.propietario.cedRuc}"/>
                            </p:column>
                            <p:column headerText="Nombre" >
                                <p:outputLabel value="#{pro.propietario.nombre}"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="Historia de Dominio">
                        <p:inputTextarea value="#{inscripciones.fichaSeleccionada.descripcionRegistral}" 
                                         style="width: 100%;" rows="12" readonly="true" autoResize="false"/>
                    </p:tab>

                    <p:tab title="Observaciones">
                        <p:inputTextarea value="#{inscripciones.fichaSeleccionada.observaciones}" 
                                         style="width: 100%;" rows="12" readonly="true" autoResize="false"/>
                    </p:tab>

                </p:tabView>
                <!-- <div style="text-align: center; margin-top: 15px;">
                    <p:commandButton value="Cerrar" icon="pi pi-times" onclick="PF('dlgFichaDetalle').hide();" />
                </div> -->
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgDocumentos" header="Documentos de Inscripcion" modal="true">
            <h:form id="frmDocuments">
                <h:panelGrid columns="5" style="font-weight: bolder;text-align: center;">
                    <p:outputLabel value="Acta de Inscripción"/>
                    <p:spacer width="20"/>
                    <p:outputLabel value="Razón de Inscripción"/>
                    <p:spacer width="20"/>
                    <p:outputLabel value="Razón Grupal"/>
                    <p:commandLink actionListener="#{inscripciones.imprimirInscripcion(inscripciones.movimiento)}">
                        <p:graphicImage value="/resources/icons/inscripciones.png" height="80" />
                    </p:commandLink>
                    <p:spacer width="10"/>
                    <p:commandLink actionListener="#{inscripciones.imprimirRazon(inscripciones.movimiento)}">
                        <p:graphicImage value="/resources/icons/archivo_firmado.png" height="80"/>
                    </p:commandLink>
                    <p:spacer width="10"/>
                    <p:commandLink actionListener="#{inscripciones.generarRazonGrupal(inscripciones.movimiento)}">
                        <p:graphicImage value="/resources/icons/exoneracion.png" height="80"/>
                    </p:commandLink>
                </h:panelGrid>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgMarginacion" header="Marginaciones de Sistema" modal="true" width="1000"
                  resizable="false" position="top">
            <h:form id="formMarginacion">
                <h:panelGrid columns="4" style="font-weight: bolder;color: #0033FF;width: 100%;">
                    <h:panelGroup>
                        Contrato:<br/>
                        <p:inputText value="#{inscripciones.movimiento.acto.nombre}" size="40" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Repertorio:<br/>
                        <p:inputText value="#{inscripciones.movimiento.numRepertorio}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Inscripción:<br/>
                        <p:inputText value="#{inscripciones.movimiento.numInscripcion}" readonly="true"/>
                    </h:panelGroup>
                    <h:panelGroup>
                        Fecha Repertorio:<br/>
                        <p:inputText value="#{inscripciones.movimiento.fechaRepertorio}" readonly="true">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </h:panelGroup>
                </h:panelGrid>
                <p:tabView>
                    <p:tab title="Marginaciones" >
                        <p:dataTable style="width: 100%" scrollable="true" scrollHeight="250" lazy="false"
                                     rowIndexVar="indexMovMarg" value="#{inscripciones.marginaciones}" var="movMarg"
                                     emptyMessage="Movimiento sin marginacion(es)." resizableColumns="false">
                            <p:column headerText="No" width="20">
                                #{indexMovMarg+1}
                            </p:column>
                            <p:column headerText="Fecha" width="80">
                                <p:outputLabel value="#{movMarg.fechaIngreso}"><f:convertDateTime pattern="dd/MM/yyyy"/></p:outputLabel>
                            </p:column>
                            <p:column headerText="Usuario" width="80">
                                <p:outputLabel value="#{movMarg.usuario}" />
                            </p:column>
                            <p:column headerText="Marginación">
                                <p:outputLabel value="#{movMarg.observacion}" rendered="#{movMarg.estado}"/>
                                <p:outputLabel value="#{movMarg.observacion}" rendered="#{!movMarg.estado}" 
                                               style="text-decoration: line-through;"/>
                            </p:column>
                            <p:column headerText="***" width="40">
                                <p:commandButton icon="pi pi-ban" disabled="#{!movMarg.estado}" title="Inactivar Marginación" 
                                                 actionListener="#{inscripciones.inactivarMarginacion(movMarg)}" /> 
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Nueva Marginación" >
                        <p:inputTextarea value="#{inscripciones.marg.observacion}" style="width: 100%;" 
                                         rows="8" autoResize="false"/><br/><br/>
                        <center>
                            <p:commandButton value="Guardar Marginación" icon="pi pi-save" 
                                             style="background-color: peru;" 
                                             actionListener="#{inscripciones.agregarMarginacion()}"/>
                        </center>
                    </p:tab>
                </p:tabView>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
